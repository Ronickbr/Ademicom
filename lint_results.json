[{"filePath":"D:\\Sites\\Scan-relatorio\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\scripts\\insert-label.js","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":1,"column":26,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":1,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":12,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const { createClient } = require('@supabase/supabase-js');\r\n\r\nconst supabaseUrl = 'https://tqjpbnplnpujygojgkcy.supabase.co';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxanBibnBsbnB1anlnb2pna2N5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5NjAyMjIsImV4cCI6MjA4NzUzNjIyMn0.i6iEk7KqBsct7UG9ADemu9x3DeyEWulof2ugy4xR6JE';\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nasync function insertData() {\r\n    const internalSerial = `INT-LABEL-${Math.floor(Math.random() * 1000000)}`;\r\n\r\n    console.log(`Inserindo dado com ID Interno: ${internalSerial}`);\r\n\r\n    const { data, error } = await supabase.from('products').insert([\r\n        {\r\n            brand: 'Electrolux',\r\n            model: 'IM8S',\r\n            original_serial: '30926473',\r\n            internal_serial: internalSerial,\r\n            voltage: '127V',\r\n            status: 'CADASTRO',\r\n            technical_data: {\r\n                commercial_code: '02623FBA',\r\n                color: '30',\r\n                type: 'COMB. FROST FREE ELUX',\r\n                pnc_ml: '900277738 / 00',\r\n                manufacturing_date: '03/03/2023 09:50:18',\r\n                gas_frigor: 'R600a',\r\n                gas_charge: '45 g',\r\n                compressor: 'EMBRACO',\r\n                vol_freezer: '200 L',\r\n                vol_refrig: '390 L',\r\n                vol_total: '590 L',\r\n                pressure_kpa: '788 / 52',\r\n                pressure_psig: '100 / -7.09',\r\n                freezing_cap: '9 kg/24h',\r\n                current: '2.3 A',\r\n                defrost_power: '316 W',\r\n                frequency: '60 Hz'\r\n            }\r\n        }\r\n    ]);\r\n\r\n    if (error) {\r\n        console.error('Erro ao inserir:', error);\r\n    } else {\r\n        console.log('Sucesso! Produto inserido.');\r\n    }\r\n}\r\n\r\ninsertData();\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\approvals\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[190,202],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[242,260],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[321,338],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":19,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[397,432],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[723,726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[723,726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1946,1949],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1946,1949],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3571,3574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3571,3574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":161,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":161,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6581,6584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6581,6584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport {\r\n    CheckCircle,\r\n    XCircle,\r\n    Search,\r\n    Loader2,\r\n    AlertCircle,\r\n    ShieldCheck,\r\n    Clock,\r\n    FileSearch,\r\n    Package,\r\n    ArrowRight\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function ApprovalsPage() {\r\n    const { profile, loading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const [products, setProducts] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isProcessing, setIsProcessing] = useState<string | null>(null);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const isAuthorized = profile?.role === \"SUPERVISOR\" || profile?.role === \"GESTOR\" || profile?.role === \"ADMIN\";\r\n\r\n    useEffect(() => {\r\n        if (!authLoading && !isAuthorized) {\r\n            toast.error(\"Acesso exclusivo para supervisores\");\r\n            router.push(\"/\");\r\n            return;\r\n        }\r\n        if (isAuthorized) {\r\n            fetchPendingApprovals();\r\n        }\r\n    }, [authLoading, isAuthorized, router]);\r\n\r\n    const fetchPendingApprovals = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(`\r\n                    *,\r\n                    product_logs (\r\n                        data,\r\n                        created_at\r\n                    )\r\n                `)\r\n                .eq(\"status\", \"TECNICO\")\r\n                .order(\"updated_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setProducts(data || []);\r\n        } catch (error: any) {\r\n            console.error(\"Erro ao buscar aprovações:\", error);\r\n            toast.error(\"Erro ao carregar fila de aprovação\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAction = async (productId: string, action: \"APPROVE\" | \"REJECT\") => {\r\n        setIsProcessing(productId);\r\n        const newStatus = action === \"APPROVE\" ? \"SUPERVISOR\" : \"CADASTRO\";\r\n\r\n        try {\r\n            const { error: updateError } = await supabase\r\n                .from(\"products\")\r\n                .update({ status: newStatus })\r\n                .eq(\"id\", productId);\r\n\r\n            if (updateError) throw updateError;\r\n\r\n            // Log the approval action\r\n            const { error: logError } = await supabase\r\n                .from(\"product_logs\")\r\n                .insert({\r\n                    product_id: productId,\r\n                    old_status: \"TECNICO\",\r\n                    new_status: newStatus,\r\n                    user_id: profile?.id,\r\n                    data: {\r\n                        action: action,\r\n                        reviewer_role: profile?.role,\r\n                        timestamp: new Date().toISOString()\r\n                    }\r\n                });\r\n\r\n            if (logError) throw logError;\r\n\r\n            toast.success(action === \"APPROVE\" ? \"Produto Aprovado!\" : \"Produto Rejeitado\", {\r\n                description: action === \"APPROVE\" ? \"Enviado para conferência final do gestor.\" : \"Retornado para a fila de cadastro.\"\r\n            });\r\n\r\n            setProducts(prev => prev.filter(p => p.id !== productId));\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao processar ação\", { description: error.message });\r\n        } finally {\r\n            setIsProcessing(null);\r\n        }\r\n    };\r\n\r\n    const filteredProducts = products.filter(p =>\r\n        (p.internal_serial || \"\").toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (p.model || \"\").toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    if (authLoading || isLoading) {\r\n        return (\r\n            <MainLayout>\r\n                <div className=\"flex h-[60vh] flex-col items-center justify-center space-y-4\">\r\n                    <Loader2 className=\"h-10 w-10 animate-spin text-primary opacity-50\" />\r\n                    <p className=\"text-sm text-muted-foreground animate-pulse tracking-widest uppercase\">Acessando central de revisão...</p>\r\n                </div>\r\n            </MainLayout>\r\n        );\r\n    }\r\n\r\n    if (!isAuthorized) return null;\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold tracking-tight text-white mb-1\">Revisão do Supervisor</h1>\r\n                        <p className=\"text-muted-foreground italic text-sm\">Validação de checklists técnicos e conformidade de entrada.</p>\r\n                    </div>\r\n                    <div className=\"glass-card flex items-center gap-4 py-2.5 px-6 border-white/5 bg-white/2\">\r\n                        <Clock className=\"h-4 w-4 text-primary\" />\r\n                        <div>\r\n                            <div className=\"text-[10px] uppercase font-black text-muted-foreground tracking-widest leading-none\">Tempo Médio Resposta</div>\r\n                            <div className=\"text-sm font-bold text-white\">14 min</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 py-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Localizar produto por série ou modelo...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full rounded-2xl border border-border bg-white/5 py-3 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary transition-all shadow-inner\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {filteredProducts.length > 0 ? (\r\n                    <div className=\"grid gap-6 md:grid-cols-2 xl:grid-cols-3\">\r\n                        {filteredProducts.map((product) => {\r\n                            const lastLog = product.product_logs?.find((l: any) => l.data?.checklist);\r\n                            const checklist = lastLog?.data?.checklist || {};\r\n                            const itemsCount = Object.keys(checklist).length || 0;\r\n                            const checkedCount = Object.values(checklist).filter(v => v === true).length || 0;\r\n\r\n                            return (\r\n                                <div key={product.id} className=\"glass-card group hover:border-primary/40 transition-all duration-500 overflow-hidden flex flex-col\">\r\n                                    <div className=\"p-6 space-y-4 flex-1\">\r\n                                        <div className=\"flex items-start justify-between\">\r\n                                            <div className=\"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform\">\r\n                                                <Package className=\"h-6 w-6\" />\r\n                                            </div>\r\n                                            <span className=\"font-mono text-[10px] bg-white/5 px-3 py-1 rounded-full text-muted-foreground border border-white/5\">\r\n                                                {product.internal_serial}\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-lg text-white group-hover:text-primary transition-colors\">{product.model}</h3>\r\n                                            <p className=\"text-xs text-muted-foreground uppercase font-black tracking-widest\">{product.brand}</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2 pt-2\">\r\n                                            <div className=\"flex items-center justify-between text-xs\">\r\n                                                <span className=\"text-muted-foreground\">Checklist Técnico</span>\r\n                                                <span className=\"text-amber-500 font-bold flex items-center gap-1\">\r\n                                                    <Clock className=\"h-3 w-3\" /> {checkedCount}/{itemsCount} itens\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"h-1.5 w-full bg-white/5 rounded-full overflow-hidden\">\r\n                                                <div\r\n                                                    className=\"h-full bg-amber-500 transition-all duration-1000\"\r\n                                                    style={{ width: itemsCount > 0 ? `${(checkedCount / itemsCount) * 100}%` : '0%' }}\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"p-4 bg-white/2 border-t border-white/5 flex gap-3\">\r\n                                        <button\r\n                                            onClick={() => handleAction(product.id, \"APPROVE\")}\r\n                                            disabled={!!isProcessing}\r\n                                            className=\"flex-1 h-12 bg-white text-black hover:bg-primary hover:text-white rounded-xl font-bold text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 active:scale-95\"\r\n                                        >\r\n                                            {isProcessing === product.id ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <ShieldCheck className=\"h-4 w-4\" />}\r\n                                            Aprovar\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleAction(product.id, \"REJECT\")}\r\n                                            disabled={!!isProcessing}\r\n                                            className=\"px-4 h-12 rounded-xl border border-white/10 text-muted-foreground hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/20 transition-all flex items-center justify-center active:scale-95\"\r\n                                            title=\"Rejeitar e Devolver\"\r\n                                        >\r\n                                            <XCircle className=\"h-5 w-5\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-card flex flex-col items-center justify-center py-24 text-center border-dashed border-2\">\r\n                        <div className=\"h-20 w-20 rounded-full bg-white/5 flex items-center justify-center mb-6 relative\">\r\n                            <FileSearch className=\"h-10 w-10 text-muted-foreground/20\" />\r\n                            <div className=\"absolute inset-0 rounded-full border border-primary/20 animate-pulse\" />\r\n                        </div>\r\n                        <h3 className=\"text-xl font-bold text-white mb-2 uppercase tracking-tighter\">Fila de Revisão Limpa</h3>\r\n                        <p className=\"text-muted-foreground max-w-xs mx-auto text-sm leading-relaxed italic\">\r\n                            Não há novas inspeções técnicas pendentes de sua aprovação no momento.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\clients\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":5,"column":83,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":89,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Trash2"},"fix":{"range":[212,220],"text":""},"desc":"Remove unused variable \"Trash2\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[508,511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[508,511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[744,747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[744,747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1422,1425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1422,1425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1693,1696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1693,1696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3037,3040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3037,3040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { Plus, Search, User, Mail, Phone, MapPin, Loader2, AlertCircle, X, Edit2, Trash2 } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { toast } from \"sonner\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\n\r\nexport default function ClientsPage() {\r\n    const { profile } = useAuth();\r\n    const [clients, setClients] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [editingClient, setEditingClient] = useState<any>(null);\r\n    const [clientForm, setClientForm] = useState({ name: \"\", tax_id: \"\", email: \"\", phone: \"\", address: \"\" });\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    const canEdit = profile?.role === \"GESTOR\" || profile?.role === \"ADMIN\";\r\n\r\n    useEffect(() => {\r\n        fetchClients();\r\n    }, []);\r\n\r\n    const fetchClients = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"clients\")\r\n                .select(\"*\")\r\n                .order(\"name\", { ascending: true });\r\n\r\n            if (error) throw error;\r\n            setClients(data || []);\r\n        } catch (error: any) {\r\n            console.error(\"Erro ao buscar clientes:\", error);\r\n            toast.error(\"Erro ao carregar clientes\", { description: error.message });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleOpenModal = (client: any = null) => {\r\n        if (client) {\r\n            setEditingClient(client);\r\n            setClientForm({\r\n                name: client.name || \"\",\r\n                tax_id: client.tax_id || \"\",\r\n                email: client.email || \"\",\r\n                phone: client.phone || \"\",\r\n                address: client.address || \"\"\r\n            });\r\n        } else {\r\n            setEditingClient(null);\r\n            setClientForm({ name: \"\", tax_id: \"\", email: \"\", phone: \"\", address: \"\" });\r\n        }\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleSaveClient = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsSaving(true);\r\n        try {\r\n            if (editingClient) {\r\n                const { error } = await supabase\r\n                    .from(\"clients\")\r\n                    .update(clientForm)\r\n                    .eq(\"id\", editingClient.id);\r\n\r\n                if (error) throw error;\r\n                toast.success(\"Cliente atualizado!\");\r\n            } else {\r\n                const { error } = await supabase\r\n                    .from(\"clients\")\r\n                    .insert([clientForm]);\r\n\r\n                if (error) throw error;\r\n                toast.success(\"Cliente cadastrado!\");\r\n            }\r\n\r\n            setShowModal(false);\r\n            fetchClients();\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao salvar\", { description: error.message });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const filteredClients = clients.filter(c =>\r\n        c.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.tax_id?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Clientes</h1>\r\n                        <p className=\"text-muted-foreground\">Gerencie sua base de clientes e parceiros.</p>\r\n                    </div>\r\n                    {canEdit && (\r\n                        <button\r\n                            onClick={() => handleOpenModal()}\r\n                            className=\"btn-primary flex items-center gap-2\"\r\n                        >\r\n                            <Plus className=\"h-4 w-4\" />\r\n                            Novo Cliente\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Modal de Cadastro/Edição */}\r\n                {showModal && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n                        <div className=\"glass-card w-full max-w-lg space-y-6 border-white/10 shadow-2xl p-8\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <h2 className=\"text-xl font-bold\">{editingClient ? \"Editar Cliente\" : \"Novo Cliente\"}</h2>\r\n                                <button onClick={() => setShowModal(false)} className=\"text-muted-foreground hover:text-white transition-colors\">\r\n                                    <X className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleSaveClient} className=\"space-y-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Nome / Razão Social</label>\r\n                                    <input\r\n                                        required\r\n                                        value={clientForm.name}\r\n                                        onChange={e => setClientForm({ ...clientForm, name: e.target.value })}\r\n                                        className=\"w-full bg-white/5 border border-border rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">CPF / CNPJ</label>\r\n                                        <input\r\n                                            value={clientForm.tax_id}\r\n                                            onChange={e => setClientForm({ ...clientForm, tax_id: e.target.value })}\r\n                                            className=\"w-full bg-white/5 border border-border rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary font-mono\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Telefone</label>\r\n                                        <input\r\n                                            value={clientForm.phone}\r\n                                            onChange={e => setClientForm({ ...clientForm, phone: e.target.value })}\r\n                                            className=\"w-full bg-white/5 border border-border rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Email</label>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        value={clientForm.email}\r\n                                        onChange={e => setClientForm({ ...clientForm, email: e.target.value })}\r\n                                        className=\"w-full bg-white/5 border border-border rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest\">Endereço Completo</label>\r\n                                    <textarea\r\n                                        value={clientForm.address}\r\n                                        onChange={e => setClientForm({ ...clientForm, address: e.target.value })}\r\n                                        className=\"w-full bg-white/5 border border-border rounded-lg px-4 py-2 h-20 text-sm focus:outline-none focus:ring-1 focus:ring-primary resize-none\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex gap-3 pt-4\">\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={isSaving}\r\n                                        className=\"flex-1 btn-primary\"\r\n                                    >\r\n                                        {isSaving ? <Loader2 className=\"h-4 w-4 animate-spin mx-auto\" /> : \"Salvar Alterações\"}\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setShowModal(false)}\r\n                                        className=\"px-6 rounded-lg border border-border hover:bg-white/5 transition-all text-sm font-medium\"\r\n                                    >\r\n                                        Cancelar\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center gap-4 py-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar por nome ou CNPJ...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full rounded-lg border border-border bg-white/5 py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {isLoading ? (\r\n                    <div className=\"flex h-64 flex-col items-center justify-center space-y-4\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Carregando clientes...</p>\r\n                    </div>\r\n                ) : filteredClients.length > 0 ? (\r\n                    <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n                        {filteredClients.map((client) => (\r\n                            <div key={client.id} className=\"glass-card group hover:border-primary/50 transition-all duration-300\">\r\n                                <div className=\"flex items-start justify-between mb-4\">\r\n                                    <div className=\"rounded-xl bg-primary/10 p-2.5 text-primary group-hover:bg-primary group-hover:text-white transition-all\">\r\n                                        <User className=\"h-5 w-5\" />\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"text-[10px] font-bold bg-white/5 px-2 py-1 rounded text-muted-foreground uppercase tracking-widest leading-none\">\r\n                                            {client.tax_id || \"S/ ID Fiscal\"}\r\n                                        </span>\r\n                                        {canEdit && (\r\n                                            <button\r\n                                                onClick={() => handleOpenModal(client)}\r\n                                                className=\"p-1.5 rounded-lg hover:bg-primary/10 text-muted-foreground hover:text-primary transition-colors\"\r\n                                                title=\"Editar Cliente\"\r\n                                            >\r\n                                                <Edit2 className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-4\">\r\n                                    <h3 className=\"text-lg font-bold group-hover:text-primary transition-colors truncate\">{client.name}</h3>\r\n                                    <div className=\"space-y-2 text-sm text-muted-foreground\">\r\n                                        <div className=\"flex items-center gap-2.5\">\r\n                                            <div className=\"h-7 w-7 rounded-lg bg-white/5 flex items-center justify-center\">\r\n                                                <Mail className=\"h-3.5 w-3.5\" />\r\n                                            </div>\r\n                                            <span className=\"truncate\">{client.email || \"N/A\"}</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2.5\">\r\n                                            <div className=\"h-7 w-7 rounded-lg bg-white/5 flex items-center justify-center\">\r\n                                                <Phone className=\"h-3.5 w-3.5\" />\r\n                                            </div>\r\n                                            <span>{client.phone || \"N/A\"}</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2.5\">\r\n                                            <div className=\"h-7 w-7 rounded-lg bg-white/5 flex items-center justify-center\">\r\n                                                <MapPin className=\"h-3.5 w-3.5\" />\r\n                                            </div>\r\n                                            <span className=\"line-clamp-1\">{client.address || \"N/A\"}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-card flex flex-col items-center justify-center py-16 text-center border-dashed\">\r\n                        <AlertCircle className=\"h-12 w-12 text-muted-foreground/30 mb-4\" />\r\n                        <h3 className=\"text-xl font-semibold\">Nenhum cliente encontrado</h3>\r\n                        <p className=\"text-muted-foreground max-w-xs mt-2 text-sm\">\r\n                            {searchTerm ? \"Não encontramos resultados para sua busca.\" : \"Sua base de clientes está vazia.\"}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\inventory\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1928,1931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1928,1931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2717,2720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2717,2720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":95,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":95,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":95,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3368,3371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3368,3371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":120,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":120,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4263,4266],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4263,4266],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4832,4835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4832,4835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":375,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":375,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24940,24943],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24940,24943],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":383,"column":197,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[26149,26150],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[26149,26150],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[26149,26150],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[26149,26150],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":383,"column":221,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[26173,26174],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[26173,26174],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[26173,26174],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[26173,26174],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":386,"column":123,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":386,"endColumn":126,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26500,26503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26500,26503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport {\r\n    Search,\r\n    Filter,\r\n    History,\r\n    Box,\r\n    User,\r\n    Loader2,\r\n    AlertCircle,\r\n    X,\r\n    CheckCircle2,\r\n    ClipboardList,\r\n    ShieldCheck,\r\n    Package,\r\n    ArrowUpRight,\r\n    Edit2,\r\n    Trash2,\r\n    FileDown,\r\n    Download\r\n} from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\nimport { exportToPDF, exportToExcel } from \"@/lib/export-utils\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\nimport { Product } from \"@/lib/types\";\r\n\r\nconst statusConfig = {\r\n    CADASTRO: { label: \"Cadastro\", color: \"bg-neutral-500/10 text-neutral-400\", icon: Search },\r\n    LEITURA: { label: \"Leitura\", color: \"bg-blue-500/10 text-blue-500\", icon: Search },\r\n    TECNICO: { label: \"Técnico\", color: \"bg-amber-500/10 text-amber-500\", icon: ClipboardList },\r\n    SUPERVISOR: { label: \"Supervisor\", color: \"bg-indigo-500/10 text-indigo-500\", icon: CheckCircle2 },\r\n    GESTOR: { label: \"Gestor\", color: \"bg-orange-500/10 text-orange-500\", icon: ShieldCheck },\r\n    LIBERADO: { label: \"Liberado\", color: \"bg-emerald-500/10 text-emerald-500\", icon: Package },\r\n};\r\n\r\ninterface InventoryProduct extends Product {\r\n    orders: {\r\n        id: string;\r\n        clients: {\r\n            name: string;\r\n        };\r\n    } | null;\r\n}\r\n\r\nexport default function InventoryPage() {\r\n    const { profile } = useAuth();\r\n    const [products, setProducts] = useState<InventoryProduct[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [statusFilter, setStatusFilter] = useState(\"ALL\");\r\n\r\n    const [selectedProduct, setSelectedProduct] = useState<InventoryProduct | null>(null);\r\n    const [history, setHistory] = useState<any[]>([]);\r\n    const [isLoadingHistory, setIsLoadingHistory] = useState(false);\r\n    const [editingProduct, setEditingProduct] = useState<InventoryProduct | null>(null);\r\n    const [deletingProduct, setDeletingProduct] = useState<InventoryProduct | null>(null);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchInventory();\r\n    }, []);\r\n\r\n    const fetchInventory = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(\"*, orders:order_id (id, clients (name))\")\r\n                .order(\"updated_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setProducts(data || []);\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao carregar estoque\", { description: error.message });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchHistory = async (product: InventoryProduct) => {\r\n        setSelectedProduct(product);\r\n        setIsLoadingHistory(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"product_logs\")\r\n                .select(\"*\")\r\n                .eq(\"product_id\", product.id)\r\n                .order(\"created_at\", { ascending: false });\r\n            if (error) throw error;\r\n            setHistory(data || []);\r\n        } catch (error: any) {\r\n            toast.error(\"Falha ao carregar histórico\");\r\n        } finally {\r\n            setIsLoadingHistory(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!editingProduct) return;\r\n        setIsSaving(true);\r\n        try {\r\n            const { error } = await supabase\r\n                .from(\"products\")\r\n                .update({\r\n                    brand: editingProduct.brand,\r\n                    model: editingProduct.model,\r\n                    original_serial: editingProduct.original_serial,\r\n                    voltage: editingProduct.voltage,\r\n                })\r\n                .eq(\"id\", editingProduct.id);\r\n            if (error) throw error;\r\n            toast.success(\"Dados atualizados!\");\r\n            setEditingProduct(null);\r\n            fetchInventory();\r\n        } catch (error: any) {\r\n            toast.error(\"Erro na atualização\", { description: error.message });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!deletingProduct) return;\r\n        setIsSaving(true);\r\n        try {\r\n            const { error } = await supabase.from(\"products\").delete().eq(\"id\", deletingProduct.id);\r\n            if (error) throw error;\r\n            toast.success(\"Registro removido.\");\r\n            setDeletingProduct(null);\r\n            fetchInventory();\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao remover\", { description: error.message });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleExport = (type: 'PDF' | 'EXCEL') => {\r\n        if (type === 'PDF') {\r\n            const headers = [\"ID\", \"Marca\", \"Modelo\", \"Status\", \"Serial\"];\r\n            const pdfData = filteredProducts.map(p => [p.internal_serial, p.brand, p.model, p.status, p.original_serial]);\r\n            exportToPDF(\"Inventário Industrial\", headers, pdfData, \"estoque\");\r\n        } else {\r\n            const data = filteredProducts.map(p => ({\r\n                ID: p.internal_serial,\r\n                Marca: p.brand,\r\n                Modelo: p.model,\r\n                Status: p.status,\r\n                Original: p.original_serial,\r\n                Cliente: p.orders?.clients?.name || \"-\"\r\n            }));\r\n            exportToExcel(data, \"estoque_industrial\");\r\n        }\r\n        toast.info(`Exportação ${type} iniciada`);\r\n    };\r\n\r\n    const filteredProducts = products.filter(p => {\r\n        const searchStr = `${p.internal_serial} ${p.brand} ${p.model} ${p.original_serial}`.toLowerCase();\r\n        const match = searchStr.includes(searchTerm.toLowerCase());\r\n        const matchStatus = statusFilter === \"ALL\" || p.status === statusFilter;\r\n        return match && matchStatus;\r\n    });\r\n\r\n    const isAuthorized = profile?.role === \"GESTOR\" || profile?.role === \"ADMIN\";\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"max-w-7xl mx-auto space-y-8 pb-12\">\r\n                <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-black tracking-tighter text-white mb-2 uppercase italic\">Inventory <span className=\"text-primary\">Control</span></h1>\r\n                        <p className=\"text-muted-foreground font-medium opacity-60\">Rastreabilidade total e gestão de ativos em tempo real.</p>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        <button onClick={() => handleExport('PDF')} className=\"h-12 px-6 rounded-2xl bg-white/5 border border-white/10 text-white font-bold hover:bg-white/10 transition-all flex items-center gap-2\">\r\n                            <FileDown className=\"h-4 w-4\" /> PDF\r\n                        </button>\r\n                        <button onClick={() => handleExport('EXCEL')} className=\"h-12 px-6 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 font-bold hover:bg-emerald-500 hover:text-white transition-all flex items-center gap-2\">\r\n                            <Download className=\"h-4 w-4\" /> EXCEL\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                    <div className=\"md:col-span-3 relative group\">\r\n                        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Pesquisar por ID, Marca ou Modelo...\"\r\n                            value={searchTerm}\r\n                            onChange={e => setSearchTerm(e.target.value)}\r\n                            className=\"w-full h-14 bg-white/5 border border-white/10 rounded-2xl pl-12 pr-4 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"relative\">\r\n                        <Filter className=\"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none\" />\r\n                        <select\r\n                            value={statusFilter}\r\n                            onChange={e => setStatusFilter(e.target.value)}\r\n                            className=\"w-full h-14 bg-white/5 border border-white/10 rounded-2xl pl-10 pr-4 text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all cursor-pointer\"\r\n                        >\r\n                            <option value=\"ALL\">Status: Todos</option>\r\n                            {Object.entries(statusConfig).map(([val, conf]) => (\r\n                                <option key={val} value={val} className=\"bg-neutral-900\">{conf.label}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {isLoading ? (\r\n                    <div className=\"h-[40vh] flex flex-col items-center justify-center gap-4\">\r\n                        <Loader2 className=\"h-10 w-10 animate-spin text-primary opacity-20\" />\r\n                        <p className=\"text-xs font-black uppercase tracking-[0.2em] text-muted-foreground animate-pulse\">Sincronizando Ativos...</p>\r\n                    </div>\r\n                ) : filteredProducts.length > 0 ? (\r\n                    <div className=\"glass-card overflow-hidden border-white/5\">\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full border-collapse min-w-[800px]\">\r\n                                <thead>\r\n                                    <tr className=\"bg-white/2 border-b border-white/5\">\r\n                                        <th className=\"px-6 py-5 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground\">Ativo / Especificação</th>\r\n                                        <th className=\"px-6 py-5 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground\">ID Rastreio</th>\r\n                                        <th className=\"px-6 py-5 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground\">Workflow</th>\r\n                                        <th className=\"px-6 py-5 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground\">Localização</th>\r\n                                        <th className=\"px-6 py-5 text-right text-[10px] font-black uppercase tracking-widest text-muted-foreground\">Ações</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-white/5\">\r\n                                    {filteredProducts.map(p => {\r\n                                        const config = statusConfig[p.status as keyof typeof statusConfig];\r\n                                        return (\r\n                                            <tr key={p.id} className=\"group hover:bg-white/[0.02] transition-colors\">\r\n                                                <td className=\"px-6 py-5\">\r\n                                                    <div>\r\n                                                        <p className=\"font-bold text-white text-base group-hover:text-primary transition-colors\">{p.brand} {p.model}</p>\r\n                                                        <p className=\"text-[10px] font-black text-muted-foreground uppercase mt-0.5 tracking-tighter\">{p.voltage || \"BIVOLT\"}</p>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-5 font-mono text-xs\">\r\n                                                    <div className=\"flex flex-col\">\r\n                                                        <span className=\"text-primary font-black uppercase tracking-widest\">{p.internal_serial}</span>\r\n                                                        <span className=\"text-[10px] opacity-40\">{p.original_serial}</span>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"px-6 py-5\">\r\n                                                    {config && (\r\n                                                        <div className={cn(\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border\", config.color.replace('bg-', 'border-').replace('/10', '/30'), config.color)}>\r\n                                                            <config.icon className=\"h-3 w-3\" />\r\n                                                            {config.label}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td className=\"px-6 py-5\">\r\n                                                    {p.orders ? (\r\n                                                        <div className=\"flex items-center gap-2\">\r\n                                                            <div className=\"h-6 w-6 rounded-md bg-white/5 flex items-center justify-center text-white/40\">\r\n                                                                <User className=\"h-3 w-3\" />\r\n                                                            </div>\r\n                                                            <span className=\"text-xs font-semibold text-white/70\">{p.orders.clients?.name}</span>\r\n                                                        </div>\r\n                                                    ) : (\r\n                                                        <span className=\"text-[10px] font-black uppercase text-muted-foreground/30 italic\">Em Trânsito / Stock</span>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td className=\"px-6 py-5 text-right\">\r\n                                                    <div className=\"flex items-center justify-end gap-2 group-hover:translate-x-0 translate-x-4 opacity-0 group-hover:opacity-100 transition-all duration-300\">\r\n                                                        <button onClick={() => fetchHistory(p)} className=\"h-9 w-9 flex items-center justify-center rounded-xl bg-white/5 text-white/40 hover:bg-primary hover:text-white transition-all\">\r\n                                                            <History className=\"h-4 w-4\" />\r\n                                                        </button>\r\n                                                        {isAuthorized && (\r\n                                                            <>\r\n                                                                <button onClick={() => setEditingProduct({ ...p })} className=\"h-9 w-9 flex items-center justify-center rounded-xl bg-white/5 text-white/40 hover:bg-white hover:text-black transition-all\">\r\n                                                                    <Edit2 className=\"h-4 w-4\" />\r\n                                                                </button>\r\n                                                                <button onClick={() => setDeletingProduct(p)} className=\"h-9 w-9 flex items-center justify-center rounded-xl bg-white/5 text-white/40 hover:bg-red-500 hover:text-white transition-all\">\r\n                                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                                </button>\r\n                                                            </>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        );\r\n                                    })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"h-[40vh] flex flex-col items-center justify-center text-center p-12 border-2 border-dashed border-white/5 rounded-[2.5rem]\">\r\n                        <Box className=\"h-16 w-16 text-white/5 mb-6\" />\r\n                        <h3 className=\"text-2xl font-black uppercase tracking-tighter text-white\">Nenhum Registro</h3>\r\n                        <p className=\"text-muted-foreground italic text-sm mt-2 max-w-xs\">{searchTerm ? \"Refine seus parâmetros de busca.\" : \"O estoque está vazio.\"}</p>\r\n                    </div>\r\n                )}\r\n\r\n                {editingProduct && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/80 backdrop-blur-xl animate-in fade-in\">\r\n                        <div className=\"glass-card w-full max-w-xl p-10 border-white/10 shadow-4xl space-y-8\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div>\r\n                                    <h2 className=\"text-3xl font-black uppercase tracking-tighter text-white\">Editar Ativo</h2>\r\n                                    <p className=\"text-xs font-black text-primary tracking-widest uppercase\">{editingProduct.internal_serial}</p>\r\n                                </div>\r\n                                <button onClick={() => setEditingProduct(null)} className=\"h-10 w-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors\"><X className=\"h-5 w-5\" /></button>\r\n                            </div>\r\n                            <form onSubmit={handleUpdate} className=\"space-y-6\">\r\n                                <div className=\"grid grid-cols-2 gap-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-widest pl-1\">Marca</label>\r\n                                        <input required className=\"w-full h-14 bg-white/5 border border-white/10 rounded-2xl px-4 text-white focus:ring-2 focus:ring-primary/50 outline-none\" value={editingProduct.brand || \"\"} onChange={e => setEditingProduct({ ...editingProduct, brand: e.target.value })} />\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-widest pl-1\">Modelo</label>\r\n                                        <input required className=\"w-full h-14 bg-white/5 border border-white/10 rounded-2xl px-4 text-white focus:ring-2 focus:ring-primary/50 outline-none\" value={editingProduct.model || \"\"} onChange={e => setEditingProduct({ ...editingProduct, model: e.target.value })} />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-widest pl-1\">Serial Original</label>\r\n                                    <input required className=\"w-full h-14 bg-white/5 border border-white/10 rounded-2xl px-4 text-white font-mono focus:ring-2 focus:ring-primary/50 outline-none text-primary\" value={editingProduct.original_serial || \"\"} onChange={e => setEditingProduct({ ...editingProduct, original_serial: e.target.value })} />\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-6 pt-6\">\r\n                                    <button type=\"button\" onClick={() => setEditingProduct(null)} className=\"h-16 rounded-3xl border border-white/10 text-white font-black uppercase tracking-widest text-xs hover:bg-white/5 transition-all\">Cancelar</button>\r\n                                    <button disabled={isSaving} className=\"h-16 rounded-3xl bg-white text-black hover:bg-primary hover:text-white font-black uppercase tracking-widest text-xs transition-all disabled:opacity-50\">\r\n                                        {isSaving ? <Loader2 className=\"h-5 w-5 animate-spin mx-auto\" /> : \"Salvar Mudanças\"}\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {deletingProduct && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/90 backdrop-blur-3xl animate-in zoom-in-95\">\r\n                        <div className=\"glass-card w-full max-w-md p-10 border-red-500/20 shadow-4xl text-center space-y-8\">\r\n                            <div className=\"h-20 w-20 rounded-full bg-red-500/10 flex items-center justify-center mx-auto ring-8 ring-red-500/5\"><AlertCircle className=\"h-10 w-10 text-red-500\" /></div>\r\n                            <div className=\"space-y-2\">\r\n                                <h2 className=\"text-2xl font-black uppercase tracking-tighter text-white\">Remover Permanentemente?</h2>\r\n                                <p className=\"text-sm text-muted-foreground italic leading-relaxed px-4\">Esta ação irá apagar todos os registros do ativo <span className=\"text-white font-bold\">{deletingProduct.internal_serial}</span>.</p>\r\n                            </div>\r\n                            <div className=\"flex flex-col gap-3\">\r\n                                <button onClick={handleDelete} disabled={isSaving} className=\"h-16 rounded-3xl bg-red-500 hover:bg-red-600 text-white font-black uppercase tracking-widest text-xs shadow-lg shadow-red-500/20 transition-all\">\r\n                                    {isSaving ? <Loader2 className=\"h-5 w-5 animate-spin mx-auto\" /> : \"Confirmar Exclusão\"}\r\n                                </button>\r\n                                <button onClick={() => setDeletingProduct(null)} className=\"h-12 text-muted-foreground hover:text-white font-bold text-xs uppercase transition-all tracking-widest\">Manter Registro</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {selectedProduct && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/80 backdrop-blur-xl animate-in fade-in\">\r\n                        <div className=\"glass-card w-full max-w-3xl p-10 border-white/10 shadow-5xl max-h-[85vh] flex flex-col\">\r\n                            <div className=\"flex justify-between items-start mb-10\">\r\n                                <div className=\"flex gap-4 items-center\">\r\n                                    <div className=\"h-14 w-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary\"><History className=\"h-8 w-8\" /></div>\r\n                                    <div>\r\n                                        <h2 className=\"text-3xl font-black uppercase tracking-tighter text-white\">{selectedProduct.brand} {selectedProduct.model}</h2>\r\n                                        <p className=\"text-xs font-black text-primary tracking-[0.3em] uppercase\">{selectedProduct.internal_serial}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <button onClick={() => setSelectedProduct(null)} className=\"h-12 w-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors\"><X className=\"h-6 w-6\" /></button>\r\n                            </div>\r\n\r\n                            <div className=\"flex-1 overflow-y-auto pr-4 space-y-8 scrollbar-hide\">\r\n                                {isLoadingHistory ? (\r\n                                    <div className=\"py-20 flex justify-center\"><Loader2 className=\"h-8 w-8 animate-spin text-primary opacity-20\" /></div>\r\n                                ) : history.length > 0 ? (\r\n                                    <div className=\"relative pl-8 border-l border-white/5 space-y-10\">\r\n                                        {history.map((log: any) => (\r\n                                            <div key={log.id} className=\"relative\">\r\n                                                <div className=\"absolute -left-11 top-1 h-6 w-6 rounded-full bg-neutral-900 border-2 border-primary shadow-[0_0_15px_rgba(var(--primary),0.3)] flex items-center justify-center\"><ArrowUpRight className=\"h-3 w-3 text-primary\" /></div>\r\n                                                <div className=\"space-y-3\">\r\n                                                    <div className=\"flex justify-between items-center\">\r\n                                                        <p className=\"text-sm font-black text-white uppercase tracking-wider\">Status: <span className=\"text-primary\">{log.new_status}</span></p>\r\n                                                        <span className=\"text-[10px] font-black text-muted-foreground opacity-40 uppercase\">{new Date(log.created_at).toLocaleString(\"pt-BR\")}</span>\r\n                                                    </div>\r\n                                                    {log.data?.observations && <p className=\"p-4 rounded-2xl bg-white/5 border border-white/5 text-xs text-muted-foreground italic leading-relaxed\">\"{log.data.observations}\"</p>}\r\n                                                    {log.data?.checklist && (\r\n                                                        <div className=\"flex flex-wrap gap-2 text-[9px] font-black\">\r\n                                                            {Object.entries(log.data.checklist).map(([key, val]: [string, any]) => (\r\n                                                                <span key={key} className={cn(\"px-2 py-1 rounded-md uppercase border\", val ? \"bg-emerald-500/5 text-emerald-500 border-emerald-500/20\" : \"bg-red-500/5 text-red-500 border-red-500/20\")}>{key}</span>\r\n                                                            ))}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"py-20 text-center opacity-30 italic text-sm\">Nenhum evento registrado.</div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MainLayout' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":20,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"MainLayout"},"fix":{"range":[105,167],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":21,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1119,1122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1119,1122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { Lock, Mail, Loader2, ShieldCheck, Zap } from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const { data, error } = await supabase.auth.signInWithPassword({\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(\"Bem-vindo de volta!\", {\r\n                description: \"Login realizado com sucesso.\",\r\n            });\r\n\r\n            // Redirect to dashboard\r\n            router.push(\"/\");\r\n            router.refresh();\r\n        } catch (error: any) {\r\n            console.error(\"Login error:\", error);\r\n            toast.error(\"Erro ao entrar\", {\r\n                description: error.message || \"Verifique suas credenciais.\",\r\n            });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#050505] flex items-center justify-center p-4 relative overflow-hidden\">\r\n            {/* Background Effects */}\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px] animate-pulse\" />\r\n                <div className=\"absolute bottom-1/4 right-1/4 w-[400px] h-[400px] bg-blue-500/10 rounded-full blur-[100px]\" />\r\n            </div>\r\n\r\n            <div className=\"w-full max-w-md space-y-8 relative\">\r\n                {/* Logo Section */}\r\n                <div className=\"text-center space-y-2\">\r\n                    <div className=\"inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-white/5 border border-white/10 shadow-2xl mb-4\">\r\n                        <Zap className=\"h-8 w-8 text-primary fill-primary\" />\r\n                    </div>\r\n                    <h1 className=\"text-4xl font-extrabold text-white tracking-tighter\">\r\n                        Scan<span className=\"text-primary italic\">Relatório</span>\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground text-sm font-medium tracking-wide\">\r\n                        SISTEMA DE RASTREABILIDADE INDUSTRIAL\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Login Card */}\r\n                <div className=\"glass-card p-8 border-white/10 shadow-2xl relative group overflow-hidden\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n\r\n                    <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1\">E-mail Corporativo</label>\r\n                                <div className=\"relative group/field\">\r\n                                    <div className=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\r\n                                        <Mail className=\"h-4 w-4 text-muted-foreground group-focus-within/field:text-primary transition-colors\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        required\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                        className=\"w-full bg-white/5 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50 transition-all text-sm\"\r\n                                        placeholder=\"seu.email@ambicom.com.br\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1\">Senha de Acesso</label>\r\n                                <div className=\"relative group/field\">\r\n                                    <div className=\"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none\">\r\n                                        <Lock className=\"h-4 w-4 text-muted-foreground group-focus-within/field:text-primary transition-colors\" />\r\n                                    </div>\r\n                                    <input\r\n                                        type=\"password\"\r\n                                        required\r\n                                        value={password}\r\n                                        onChange={(e) => setPassword(e.target.value)}\r\n                                        className=\"w-full bg-white/5 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-white placeholder:text-white/20 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50 transition-all text-sm\"\r\n                                        placeholder=\"••••••••\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full bg-primary hover:bg-primary/90 text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/20 transition-all active:scale-95 disabled:opacity-50 disabled:active:scale-100 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                                    Autenticando...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    Entrar no Sistema\r\n                                    <ShieldCheck className=\"h-5 w-5\" />\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 pt-6 border-t border-white/5 text-center\">\r\n                        <p className=\"text-[10px] text-muted-foreground uppercase tracking-widest leading-relaxed\">\r\n                            Acesso restrito a colaboradores autorizados da Ambicom.<br />\r\n                            Suporte técnico: <span className=\"text-white\">TI@ambicom.com.br</span>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer Link */}\r\n                <div className=\"text-center\">\r\n                    <button\r\n                        onClick={() => router.push(\"/\")}\r\n                        className=\"text-xs text-muted-foreground hover:text-white transition-colors\"\r\n                    >\r\n                        Voltar para a página inicial\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\manager\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[242,260],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":12,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[260,278],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowUpRight' is defined but never used.","line":13,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowUpRight"},"fix":{"range":[278,297],"text":""},"desc":"Remove unused variable \"ArrowUpRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":16,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":10,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[324,336],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'History' is defined but never used.","line":17,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"History"},"fix":{"range":[336,350],"text":""},"desc":"Remove unused variable \"History\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[428,463],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[757,760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[757,760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [authLoading, isAuthorized, router]","fix":{"range":[1301,1328],"text":"[authLoading, isAuthorized, router]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":106,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3587,3590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3587,3590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport {\r\n    ShieldCheck,\r\n    XCircle,\r\n    Search,\r\n    Loader2,\r\n    AlertCircle,\r\n    CheckCircle,\r\n    ArrowUpRight,\r\n    TrendingUp,\r\n    Box,\r\n    Users,\r\n    History,\r\n    CheckCircle2\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function ManagerDashboard() {\r\n    const { profile, loading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const [products, setProducts] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isProcessing, setIsProcessing] = useState<string | null>(null);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const isAuthorized = profile?.role === \"GESTOR\" || profile?.role === \"ADMIN\";\r\n\r\n    useEffect(() => {\r\n        if (!authLoading && !isAuthorized) {\r\n            toast.error(\"Acesso restrito\");\r\n            router.push(\"/\");\r\n            return;\r\n        }\r\n        if (isAuthorized) {\r\n            fetchManagerQueue();\r\n        }\r\n    }, [authLoading, isAuthorized]);\r\n\r\n    const fetchManagerQueue = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(`\r\n                    *,\r\n                    product_logs (\r\n                        data,\r\n                        created_at\r\n                    )\r\n                `)\r\n                .eq(\"status\", \"SUPERVISOR\")\r\n                .order(\"updated_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setProducts(data || []);\r\n        } catch (error) {\r\n            console.error(\"Erro ao buscar fila do gestor:\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleAction = async (productId: string, action: \"RELEASE\" | \"RETURN\") => {\r\n        setIsProcessing(productId);\r\n        const newStatus = action === \"RELEASE\" ? \"GESTOR\" : \"TECNICO\";\r\n\r\n        try {\r\n            const { error: updateError } = await supabase\r\n                .from(\"products\")\r\n                .update({\r\n                    status: newStatus,\r\n                    stock_status: action === \"RELEASE\" ? \"DISPONIVEL\" : \"INDISPONIVEL\"\r\n                })\r\n                .eq(\"id\", productId);\r\n\r\n            if (updateError) throw updateError;\r\n\r\n            const { error: logError } = await supabase\r\n                .from(\"product_logs\")\r\n                .insert({\r\n                    product_id: productId,\r\n                    old_status: \"SUPERVISOR\",\r\n                    new_status: newStatus,\r\n                    user_id: profile?.id,\r\n                    data: {\r\n                        manager_action: action,\r\n                        release_timestamp: new Date().toISOString(),\r\n                        final_decision: action\r\n                    }\r\n                });\r\n\r\n            if (logError) throw logError;\r\n\r\n            toast.success(action === \"RELEASE\" ? \"Produto Liberado!\" : \"Retornado ao Técnico\", {\r\n                description: action === \"RELEASE\" ? \"O produto está pronto para ser vinculado a um pedido.\" : \"Necessário revisão técnica adicional.\"\r\n            });\r\n\r\n            setProducts(prev => prev.filter(p => p.id !== productId));\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao processar liberação\", { description: error.message });\r\n        } finally {\r\n            setIsProcessing(null);\r\n        }\r\n    };\r\n\r\n    const filteredProducts = products.filter(p =>\r\n        (p.internal_serial || \"\").toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (p.model || \"\").toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    if (authLoading || isLoading) {\r\n        return (\r\n            <MainLayout>\r\n                <div className=\"flex h-[60vh] flex-col items-center justify-center space-y-4\">\r\n                    <Loader2 className=\"h-10 w-10 animate-spin text-primary opacity-50\" />\r\n                    <p className=\"text-sm text-muted-foreground animate-pulse tracking-widest uppercase\">Validando credenciais de gestão...</p>\r\n                </div>\r\n            </MainLayout>\r\n        );\r\n    }\r\n\r\n    if (!isAuthorized) return null;\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold tracking-tight text-white mb-1\">Aprovação Final</h1>\r\n                        <p className=\"text-muted-foreground italic text-sm\">Controle de qualidade e liberação estratégica para o mercado.</p>\r\n                    </div>\r\n                    <div className=\"flex gap-4\">\r\n                        <div className=\"glass-card flex items-center gap-4 py-3 px-6 border-white/5 bg-white/2\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500\">\r\n                                <TrendingUp className=\"h-5 w-5\" />\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"text-[10px] uppercase font-black text-muted-foreground tracking-widest\">Taxa de Eficiência</div>\r\n                                <div className=\"text-lg font-black text-white\">98.5%</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 py-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar por ID Interno, Modelo ou Marca...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full rounded-2xl border border-border bg-white/5 py-3 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary transition-all\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {filteredProducts.length > 0 ? (\r\n                    <div className=\"grid gap-6 lg:grid-cols-2\">\r\n                        {filteredProducts.map((product) => (\r\n                            <div key={product.id} className=\"glass-card group hover:border-emerald-500/30 transition-all duration-300 overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity\">\r\n                                    <ShieldCheck className=\"h-20 w-20 text-emerald-500\" />\r\n                                </div>\r\n\r\n                                <div className=\"flex items-start justify-between border-b border-white/5 pb-4 mb-4 relative\">\r\n                                    <div className=\"flex gap-4\">\r\n                                        <div className=\"h-14 w-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-white transition-all\">\r\n                                            <Box className=\"h-7 w-7\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-xl text-white\">{product.model}</h3>\r\n                                            <p className=\"text-xs text-muted-foreground uppercase font-black tracking-widest\">{product.brand}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"font-mono text-[10px] bg-white/5 px-3 py-1 rounded-full text-primary tracking-tighter font-bold border border-primary/20\">\r\n                                            {product.internal_serial}\r\n                                        </div>\r\n                                        <p className=\"text-[9px] text-muted-foreground mt-1 italic\">Entrada: {new Date(product.created_at).toLocaleDateString()}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4 mb-6 relative\">\r\n                                    <div className=\"bg-white/5 p-4 rounded-2xl border border-white/5 group-hover:bg-white/10 transition-all\">\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <div className=\"text-[9px] uppercase font-black text-muted-foreground tracking-widest\">Revisão Técnica</div>\r\n                                            <CheckCircle2 className=\"h-3 w-3 text-emerald-500\" />\r\n                                        </div>\r\n                                        <div className=\"text-xs font-bold text-emerald-500 uppercase\">Aprovado S/ Ressalva</div>\r\n                                    </div>\r\n                                    <div className=\"bg-white/5 p-4 rounded-2xl border border-white/5 group-hover:bg-white/10 transition-all\">\r\n                                        <div className=\"flex items-center justify-between mb-2\">\r\n                                            <div className=\"text-[9px] uppercase font-black text-muted-foreground tracking-widest\">Auditoria</div>\r\n                                            <ShieldCheck className=\"h-3 w-3 text-blue-500\" />\r\n                                        </div>\r\n                                        <div className=\"text-xs font-bold text-blue-500 uppercase\">Dados Validados</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-3 relative\">\r\n                                    <button\r\n                                        onClick={() => handleAction(product.id, \"RELEASE\")}\r\n                                        disabled={!!isProcessing}\r\n                                        className=\"flex-[2] h-14 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-xs transition-all flex items-center justify-center gap-3 shadow-lg shadow-emerald-500/20 active:scale-95 disabled:opacity-50\"\r\n                                    >\r\n                                        {isProcessing === product.id ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <ShieldCheck className=\"h-5 w-5\" />}\r\n                                        Liberar para Venda\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleAction(product.id, \"RETURN\")}\r\n                                        disabled={!!isProcessing}\r\n                                        className=\"flex-1 h-14 rounded-2xl border border-red-500/20 text-red-500 hover:bg-red-500/10 transition-all flex items-center justify-center gap-2 font-bold text-xs uppercase tracking-widest active:scale-95\"\r\n                                        title=\"Retornar para Técnico\"\r\n                                    >\r\n                                        <XCircle className=\"h-5 w-5\" />\r\n                                        Recusar\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-card flex flex-col items-center justify-center py-24 text-center border-dashed border-2 bg-white/1\">\r\n                        <div className=\"h-24 w-24 rounded-full bg-emerald-500/5 flex items-center justify-center mb-8 relative\">\r\n                            <CheckCircle2 className=\"h-12 w-12 text-emerald-500/30\" />\r\n                            <div className=\"absolute inset-0 rounded-full border-2 border-emerald-500/10 animate-ping opacity-20\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-black text-white mb-2 uppercase tracking-tighter\">Fila de Liberação Vazia</h3>\r\n                        <p className=\"text-muted-foreground max-w-sm mx-auto text-sm leading-relaxed italic\">\r\n                            Excelente! Todos os produtos revisados pela supervisão já foram processados.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\orders\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MoreHorizontal' is defined but never used.","line":9,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"MoreHorizontal"},"fix":{"range":[174,195],"text":""},"desc":"Remove unused variable \"MoreHorizontal\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1050,1053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1050,1053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1280,1283],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1280,1283],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1356,1359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1356,1359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'router'. Either include it or remove the dependency array.","line":58,"column":8,"nodeType":"ArrayExpression","endLine":58,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [authLoading, isAuthorized, router]","fix":{"range":[1902,1929],"text":"[authLoading, isAuthorized, router]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2370,2373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2370,2373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5065,5068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5065,5068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport {\r\n    Plus,\r\n    Search,\r\n    User,\r\n    MoreHorizontal,\r\n    Loader2,\r\n    AlertCircle,\r\n    X,\r\n    FileDown,\r\n    Download,\r\n    Package,\r\n    Calendar,\r\n    ChevronRight,\r\n    Filter\r\n} from \"lucide-react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { exportToPDF, exportToExcel } from \"@/lib/export-utils\";\r\n\r\nconst statusStyles = {\r\n    PENDENTE: \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\",\r\n    CONCLUIDO: \"bg-green-500/10 text-green-500 border-green-500/20\",\r\n    CANCELADO: \"bg-red-500/10 text-red-500 border-red-500/20\",\r\n};\r\n\r\nexport default function OrdersPage() {\r\n    const { profile, loading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const [orders, setOrders] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [clients, setClients] = useState<any[]>([]);\r\n    const [availableProducts, setAvailableProducts] = useState<any[]>([]);\r\n    const [selectedClient, setSelectedClient] = useState(\"\");\r\n    const [selectedProducts, setSelectedProducts] = useState<string[]>([]);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    const isAuthorized = profile?.role === \"GESTOR\" || profile?.role === \"ADMIN\";\r\n\r\n    useEffect(() => {\r\n        if (!authLoading && !isAuthorized) {\r\n            toast.error(\"Acesso restrito\");\r\n            router.push(\"/\");\r\n            return;\r\n        }\r\n        if (isAuthorized) {\r\n            fetchOrders();\r\n        }\r\n    }, [authLoading, isAuthorized]);\r\n\r\n    const fetchOrders = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"orders\")\r\n                .select(`\r\n                    *,\r\n                    clients (name)\r\n                `)\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setOrders(data || []);\r\n        } catch (error: any) {\r\n            console.error(\"Erro ao buscar pedidos:\", error);\r\n            toast.error(\"Erro ao carregar pedidos\", { description: error.message });\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleExportPDF = () => {\r\n        const headers = [\"Pedido ID\", \"Cliente\", \"Status\", \"Data de Criação\"];\r\n        const data = filteredOrders.map(o => [\r\n            o.id.split(\"-\")[0],\r\n            o.clients?.name || \"N/A\",\r\n            o.status,\r\n            new Date(o.created_at).toLocaleDateString(\"pt-BR\")\r\n        ]);\r\n        exportToPDF(\"Relatório de Pedidos - ScanRelatório\", headers, data, \"pedidos\");\r\n    };\r\n\r\n    const handleExportExcel = () => {\r\n        const data = filteredOrders.map(o => ({\r\n            \"ID Pedido\": o.id,\r\n            \"Cliente\": o.clients?.name || \"N/A\",\r\n            \"Status\": o.status,\r\n            \"Data\": new Date(o.created_at).toLocaleString(\"pt-BR\")\r\n        }));\r\n        exportToExcel(data, \"pedidos_scan\");\r\n    };\r\n\r\n    const prepareNewOrder = async () => {\r\n        setShowAddModal(true);\r\n        const { data: cData } = await supabase.from(\"clients\").select(\"id, name\");\r\n        setClients(cData || []);\r\n        const { data: pData } = await supabase.from(\"products\").select(\"id, model, internal_serial\").eq(\"status\", \"GESTOR\");\r\n        setAvailableProducts(pData || []);\r\n    };\r\n\r\n    const handleCreateOrder = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!selectedClient || selectedProducts.length === 0) {\r\n            toast.error(\"Selecione um cliente e pelo menos um produto.\");\r\n            return;\r\n        }\r\n\r\n        setIsSaving(true);\r\n        try {\r\n            const { data: orderData, error: orderError } = await supabase\r\n                .from(\"orders\")\r\n                .insert([{\r\n                    client_id: selectedClient,\r\n                    status: \"PENDENTE\",\r\n                }])\r\n                .select()\r\n                .single();\r\n\r\n            if (orderError) throw orderError;\r\n\r\n            const { error: productError } = await supabase\r\n                .from(\"products\")\r\n                .update({\r\n                    order_id: orderData.id,\r\n                    status: \"LIBERADO\"\r\n                })\r\n                .in(\"id\", selectedProducts);\r\n\r\n            if (productError) throw productError;\r\n\r\n            toast.success(\"Pedido criado com sucesso!\", {\r\n                description: `${selectedProducts.length} produtos foram vinculados.`\r\n            });\r\n            setShowAddModal(false);\r\n            setSelectedClient(\"\");\r\n            setSelectedProducts([]);\r\n            fetchOrders();\r\n        } catch (error: any) {\r\n            toast.error(\"Erro ao criar pedido\", { description: error.message });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const filteredOrders = orders.filter(o =>\r\n        o.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        (o.clients?.name || \"\").toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    if (authLoading || isLoading) {\r\n        return (\r\n            <MainLayout>\r\n                <div className=\"flex h-[60vh] flex-col items-center justify-center space-y-4\">\r\n                    <Loader2 className=\"h-10 w-10 animate-spin text-primary opacity-50\" />\r\n                    <p className=\"text-sm text-muted-foreground animate-pulse tracking-widest uppercase\">Sincronizando registros...</p>\r\n                </div>\r\n            </MainLayout>\r\n        );\r\n    }\r\n\r\n    if (!isAuthorized) return null;\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold tracking-tight text-white mb-1\">Pedidos de Saída</h1>\r\n                        <p className=\"text-muted-foreground italic\">Controle histórico de expedição e faturamento.</p>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <div className=\"flex items-center bg-white/5 rounded-xl p-1 border border-white/10 mr-2\">\r\n                            <button\r\n                                onClick={handleExportPDF}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg text-muted-foreground hover:text-white transition-all\"\r\n                                title=\"Exportar PDF\"\r\n                            >\r\n                                <FileDown className=\"h-5 w-5\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={handleExportExcel}\r\n                                className=\"p-2 hover:bg-white/10 rounded-lg text-emerald-500 hover:text-emerald-400 transition-all\"\r\n                                title=\"Exportar Excel\"\r\n                            >\r\n                                <Download className=\"h-5 w-5\" />\r\n                            </button>\r\n                        </div>\r\n                        <button\r\n                            onClick={prepareNewOrder}\r\n                            className=\"btn-primary flex items-center gap-2 px-6 py-2.5 shadow-lg shadow-primary/20\"\r\n                        >\r\n                            <Plus className=\"h-4 w-4\" />\r\n                            Novo Pedido\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col md:flex-row gap-4 py-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Pesquisar por ID ou Cliente...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full rounded-xl border border-border bg-white/5 py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary transition-all\"\r\n                        />\r\n                    </div>\r\n                    <button className=\"px-4 py-2 bg-white/5 rounded-xl border border-border text-sm font-medium flex items-center gap-2 hover:bg-white/10 transition-colors\">\r\n                        <Filter className=\"h-4 w-4\" />\r\n                        Status: Todos\r\n                    </button>\r\n                </div>\r\n\r\n                {filteredOrders.length > 0 ? (\r\n                    <div className=\"glass overflow-hidden rounded-2xl border border-border shadow-2xl\">\r\n                        <table className=\"w-full text-left text-sm\">\r\n                            <thead className=\"bg-white/5 text-muted-foreground uppercase text-[10px] font-bold tracking-widest\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-5\">Código</th>\r\n                                    <th className=\"px-6 py-5\">Cliente / Destino</th>\r\n                                    <th className=\"px-6 py-5 text-center\">Status</th>\r\n                                    <th className=\"px-6 py-5\">Data Estimada</th>\r\n                                    <th className=\"px-6 py-5\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-border\">\r\n                                {filteredOrders.map((order) => (\r\n                                    <tr key={order.id} className=\"group hover:bg-white/5 transition-all\">\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center text-primary group-hover:bg-primary group-hover:text-white transition-all\">\r\n                                                    <Package className=\"h-4 w-4\" />\r\n                                                </div>\r\n                                                <span className=\"font-mono text-sm font-bold opacity-80 letter-spacing-tight\">\r\n                                                    #{order.id.split(\"-\")[0].toUpperCase()}\r\n                                                </span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-white font-medium\">\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span>{order.clients?.name}</span>\r\n                                                <span className=\"text-[10px] text-muted-foreground uppercase tracking-widest mt-0.5\">Venda Direta</span>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-center\">\r\n                                            <span className={cn(\"inline-block px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border\", statusStyles[order.status as keyof typeof statusStyles])}>\r\n                                                {order.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-2 text-muted-foreground text-xs font-semibold\">\r\n                                                <Calendar className=\"h-3 w-3\" />\r\n                                                {new Date(order.created_at).toLocaleDateString(\"pt-BR\")}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-right\">\r\n                                            <button className=\"p-2 text-muted-foreground hover:bg-white/10 rounded-lg transition-colors group-hover:text-white\">\r\n                                                <ChevronRight className=\"h-5 w-5\" />\r\n                                            </button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-card flex flex-col items-center justify-center py-20 text-center border-dashed border-2\">\r\n                        <div className=\"h-20 w-20 rounded-full bg-white/5 flex items-center justify-center mb-6\">\r\n                            <AlertCircle className=\"h-10 w-10 text-muted-foreground/30\" />\r\n                        </div>\r\n                        <h3 className=\"text-2xl font-bold text-white mb-2\">Sem resultados</h3>\r\n                        <p className=\"text-muted-foreground max-w-sm mx-auto text-sm leading-relaxed italic\">\r\n                            {searchTerm ? \"Não encontramos nada para sua busca. Tente palavras-chave diferentes.\" : \"O fluxo de faturamento está pronto. Inicie criando um novo pedido de saída.\"}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Modal de Novo Pedido */}\r\n                {showAddModal && (\r\n                    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300\">\r\n                        <div className=\"glass-card w-full max-w-2xl space-y-8 border-white/10 shadow-2xl p-10\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"space-y-1\">\r\n                                    <h2 className=\"text-2xl font-bold text-white\">Novo Pedido de Saída</h2>\r\n                                    <p className=\"text-xs text-muted-foreground uppercase tracking-widest font-bold\">Expedição de Inventário</p>\r\n                                </div>\r\n                                <button onClick={() => setShowAddModal(false)} className=\"h-10 w-10 rounded-full bg-white/5 flex items-center justify-center text-muted-foreground hover:text-white transition-all hover:rotate-90\">\r\n                                    <X className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={handleCreateOrder} className=\"space-y-6\">\r\n                                <div className=\"space-y-2\">\r\n                                    <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em] mb-2 block\">1. Definir Cliente</label>\r\n                                    <div className=\"relative group\">\r\n                                        <User className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground group-focus-within:text-primary transition-colors\" />\r\n                                        <select\r\n                                            required\r\n                                            className=\"w-full bg-white/5 border border-border rounded-2xl pl-12 pr-4 h-14 text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none\"\r\n                                            value={selectedClient}\r\n                                            onChange={(e) => setSelectedClient(e.target.value)}\r\n                                        >\r\n                                            <option value=\"\" className=\"bg-neutral-900 font-bold\">Selecione o cliente de destino...</option>\r\n                                            {clients.map(c => (\r\n                                                <option key={c.id} value={c.id} className=\"bg-neutral-900\">{c.name}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"flex items-center justify-between mb-2\">\r\n                                        <label className=\"text-[10px] font-black text-muted-foreground uppercase tracking-[0.2em]\">2. Selecionar Itens para Remessa</label>\r\n                                        <span className=\"text-[10px] font-bold px-2 py-0.5 rounded bg-primary/10 text-primary\">{selectedProducts.length} selecionados</span>\r\n                                    </div>\r\n                                    <div className=\"border border-border rounded-2xl bg-black/40 p-4 max-h-64 overflow-y-auto space-y-2 custom-scrollbar shadow-inner\">\r\n                                        {availableProducts.length > 0 ? availableProducts.map(p => (\r\n                                            <label key={p.id} className={cn(\"flex items-center gap-4 p-4 rounded-xl border border-white/5 transition-all cursor-pointer\", selectedProducts.includes(p.id) ? \"bg-primary/20 border-primary/50\" : \"hover:bg-white/5\")}>\r\n                                                <input\r\n                                                    type=\"checkbox\"\r\n                                                    className=\"h-5 w-5 rounded border-white/10 bg-white/5 text-primary focus:ring-primary accent-primary\"\r\n                                                    checked={selectedProducts.includes(p.id)}\r\n                                                    onChange={(e) => {\r\n                                                        if (e.target.checked) setSelectedProducts([...selectedProducts, p.id]);\r\n                                                        else setSelectedProducts(selectedProducts.filter(id => id !== p.id));\r\n                                                    }}\r\n                                                />\r\n                                                <div className=\"flex-1\">\r\n                                                    <div className=\"flex items-center justify-between\">\r\n                                                        <p className=\"font-bold text-sm text-white\">{p.model}</p>\r\n                                                        <span className=\"font-mono text-[9px] px-2 py-0.5 bg-white/5 rounded text-primary uppercase font-black uppercase tracking-tighter\">\r\n                                                            {p.internal_serial}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <p className=\"text-[10px] text-muted-foreground mt-0.5 opacity-60\">Status: Aprovado pelo Gestor</p>\r\n                                                </div>\r\n                                            </label>\r\n                                        )) : (\r\n                                            <div className=\"flex flex-col items-center justify-center p-10 text-center space-y-3\">\r\n                                                <Package className=\"h-8 w-8 text-muted-foreground opacity-20\" />\r\n                                                <p className=\"text-xs text-muted-foreground italic leading-relaxed\">Não há produtos liberados para venda.<br />O processo requer aprovação técnica e gerencial prévia.</p>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-4 pt-6\">\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={isSaving || availableProducts.length === 0}\r\n                                        className=\"flex-1 h-14 bg-primary text-white rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:brightness-110 active:scale-95 disabled:grayscale disabled:opacity-50 transition-all shadow-xl shadow-primary/20 flex items-center justify-center gap-3\"\r\n                                    >\r\n                                        {isSaving ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Download className=\"h-5 w-5\" />}\r\n                                        Finalizar e Faturar\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setShowAddModal(false)}\r\n                                        className=\"px-8 rounded-2xl border border-white/10 hover:bg-white/5 transition-all text-xs font-black uppercase tracking-widest text-muted-foreground\"\r\n                                    >\r\n                                        Voltar\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Product' is defined but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Product"},"fix":{"range":[359,367],"text":""},"desc":"Remove unused variable \"Product\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2188,2191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2188,2191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { MainLayout } from \"@/components/layout/MainLayout\";\nimport {\n  Package,\n  Clock,\n  CheckCircle2,\n  AlertCircle,\n  ArrowUpRight,\n  TrendingUp,\n  Loader2,\n  Calendar,\n  ArrowRight\n} from \"lucide-react\";\nimport { supabase } from \"@/lib/supabase\";\nimport Link from \"next/link\";\nimport { Product, ProductLog } from \"@/lib/types\";\n\nexport default function Home() {\n  const [stats, setStats] = useState([\n    { name: \"Total em Estoque\", value: \"0\", icon: Package, color: \"text-blue-500\", key: \"TOTAL\" },\n    { name: \"Fila do Técnico\", value: \"0\", icon: Clock, color: \"text-yellow-500\", key: \"CADASTRO\" },\n    { name: \"Pendente Supervisor\", value: \"0\", icon: AlertCircle, color: \"text-orange-500\", key: \"TECNICO\" },\n    { name: \"Liberados Total\", value: \"0\", icon: CheckCircle2, color: \"text-green-500\", key: \"LIBERADO\" },\n  ]);\n  const [recentActivity, setRecentActivity] = useState<ProductLog[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [leadTime, setLeadTime] = useState({ avg: \"4.2h\", status: \"Excelente\" });\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, []);\n\n  const fetchDashboardData = async () => {\n    setIsLoading(true);\n    try {\n      // 1. Fetch Stats from products\n      const { data: products } = await supabase.from(\"products\").select(\"status, created_at\");\n\n      if (products) {\n        const counts = products.reduce((acc: Record<string, number>, curr: { status: string }) => {\n          acc[curr.status] = (acc[curr.status] || 0) + 1;\n          return acc;\n        }, {});\n\n        setStats(prev => prev.map(s => ({\n          ...s,\n          value: s.key === \"TOTAL\" ? products.length.toString() : (counts[s.key] || 0).toString()\n        })));\n      }\n\n      // 2. Fetch Recent Activity from product_logs\n      const { data: logs } = await supabase\n        .from(\"product_logs\")\n        .select(`\n                    id,\n                    new_status,\n                    created_at,\n                    products (brand, model, internal_serial)\n                `)\n        .order(\"created_at\", { ascending: false })\n        .limit(5);\n\n      setRecentActivity((logs as any) || []);\n\n      // 3. Simple Lead Time Sim (Real would calculate diff between LEITURA and LIBERADO)\n      setLeadTime({ avg: \"4.2h\", status: \"Excelente\" });\n\n    } catch (error) {\n      console.error(\"Erro dashboard:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <MainLayout>\n        <div className=\"flex h-[80vh] flex-col items-center justify-center space-y-4\">\n          <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n          <p className=\"text-muted-foreground animate-pulse\">Cruzando dados de estoque...</p>\n        </div>\n      </MainLayout>\n    );\n  }\n\n  return (\n    <MainLayout>\n      <div className=\"space-y-8\">\n        {/* Header */}\n        <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4\">\n          <div>\n            <h1 className=\"text-4xl font-bold tracking-tight text-white mb-2\">Dashboard de Gestão</h1>\n            <p className=\"text-muted-foreground italic\">Indicadores de desempenho em tempo real.</p>\n          </div>\n          <div className=\"flex items-center gap-3 bg-white/5 border border-border rounded-xl px-4 py-2\">\n            <Calendar className=\"h-4 w-4 text-primary\" />\n            <span className=\"text-sm font-medium\">{new Date().toLocaleDateString(\"pt-BR\")}</span>\n          </div>\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          {stats.map((stat) => (\n            <div key={stat.name} className=\"glass-card group hover:border-primary/50 transition-all duration-300\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className={`rounded-xl bg-white/5 p-3 ${stat.color} group-hover:bg-primary/20 transition-colors`}>\n                  <stat.icon className=\"h-6 w-6\" />\n                </div>\n                <ArrowUpRight className=\"h-4 w-4 text-muted-foreground/30 group-hover:text-primary\" />\n              </div>\n              <p className=\"text-xs font-bold text-muted-foreground uppercase tracking-wider\">{stat.name}</p>\n              <p className=\"text-3xl font-bold text-white mt-1\">{stat.value}</p>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid gap-8 lg:grid-cols-3\">\n          {/* Atividade Recente Real */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            <div className=\"glass-card\">\n              <div className=\"mb-8 flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n                  <Clock className=\"h-5 w-5 text-primary\" />\n                  Últimas Movimentações\n                </h2>\n                <Link href=\"/inventory\" className=\"text-xs font-bold text-primary hover:text-white transition-colors\">Ver Estoque Completo</Link>\n              </div>\n              <div className=\"space-y-8 relative before:absolute before:left-2 before:top-2 before:h-full before:w-0.5 before:bg-white/5\">\n                {recentActivity.length > 0 ? recentActivity.map((item) => (\n                  <div key={item.id} className=\"relative pl-8 group\">\n                    <div className=\"absolute left-0 top-1.5 h-4 w-4 rounded-full bg-primary/20 border-2 border-primary group-hover:scale-110 transition-transform\" />\n                    <div className=\"flex-1 space-y-1\">\n                      <div className=\"flex items-center justify-between\">\n                        <p className=\"font-semibold text-white\">\n                          {item.products?.brand} {item.products?.model}\n                        </p>\n                        <span className=\"text-[10px] font-mono text-muted-foreground\">\n                          {new Date(item.created_at).toLocaleTimeString(\"pt-BR\")}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        ID: <span className=\"font-mono text-primary\">{item.products?.internal_serial}</span> •\n                        Novo Status: <span className=\"text-white font-medium\">{item.new_status}</span>\n                      </p>\n                    </div>\n                  </div>\n                )) : (\n                  <p className=\"text-sm text-muted-foreground italic text-center py-8\">Vazio por enquanto...</p>\n                )}\n              </div>\n            </div>\n\n            {/* Performance Chart Simulation (SVG) */}\n            <div className=\"glass-card overflow-hidden\">\n              <div className=\"mb-6 flex items-center gap-2\">\n                <TrendingUp className=\"h-5 w-5 text-primary\" />\n                <h2 className=\"text-lg font-bold text-white\">Volume de Processamento</h2>\n              </div>\n              <div className=\"h-32 w-full flex items-end gap-1 px-2\">\n                {[35, 45, 30, 55, 40, 70, 45, 60, 85, 50, 65, 75].map((val, i) => (\n                  <div\n                    key={i}\n                    className=\"flex-1 bg-primary/20 rounded-t-sm hover:bg-primary transition-colors cursor-pointer group relative\"\n                    style={{ height: `${val}%` }}\n                  >\n                    <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-black px-2 py-0.5 rounded text-[10px] font-bold opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">\n                      {val} un.\n                    </div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"mt-4 flex justify-between px-2 text-[10px] text-muted-foreground font-mono uppercase tracking-[0.2em]\">\n                <span>Manhã</span>\n                <span>Tarde</span>\n                <span>Noite</span>\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Stats & Actions */}\n          <div className=\"space-y-4\">\n            <div className=\"glass-card border-primary/20 bg-gradient-to-br from-primary/10 to-transparent\">\n              <div className=\"mb-4 flex items-center gap-2\">\n                <TrendingUp className=\"h-5 w-5 text-primary\" />\n                <h2 className=\"text-lg font-bold text-white\">Eficiência</h2>\n              </div>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-end justify-between\">\n                  <p className=\"text-sm text-muted-foreground uppercase font-bold tracking-tighter\">Tempo Médio</p>\n                  <p className=\"text-3xl font-black text-white\">{leadTime.avg}</p>\n                </div>\n                <div className=\"h-1.5 w-full rounded-full bg-white/5 overflow-hidden\">\n                  <div className=\"h-full w-[85%] bg-primary shadow-[0_0_15px_rgba(14,165,233,0.6)]\" />\n                </div>\n                <p className=\"text-[10px] text-primary/80 font-bold uppercase tracking-widest text-right\">Status: {leadTime.status}</p>\n              </div>\n            </div>\n\n            <div className=\"glass-card bg-white/5 border-dashed space-y-4\">\n              <h2 className=\"text-sm font-bold uppercase tracking-[0.2em] text-muted-foreground/50\">Fluxos de Trabalho</h2>\n              <div className=\"grid gap-2\">\n                {[\n                  { name: \"Novo Scan\", href: \"/scan\", icon: ArrowRight },\n                  { name: \"Ver Clientes\", href: \"/clients\", icon: ArrowRight },\n                  { name: \"Novo Pedido\", href: \"/orders\", icon: ArrowRight },\n                ].map(link => (\n                  <Link\n                    key={link.name}\n                    href={link.href}\n                    className=\"flex items-center justify-between p-3 rounded-lg border border-border hover:border-primary/50 hover:bg-primary/5 group transition-all\"\n                  >\n                    <span className=\"text-sm font-medium text-white group-hover:text-primary\">{link.name}</span>\n                    <link.icon className=\"h-4 w-4 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all\" />\n                  </Link>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\scan\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":6,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":55,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[230,243],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":6,"column":72,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":81,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowLeft"},"fix":{"range":[258,269],"text":""},"desc":"Remove unused variable \"ArrowLeft\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'image' is defined but never used.","line":57,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4843,4846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4843,4846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":183,"column":37,"nodeType":"JSXOpeningElement","endLine":183,"endColumn":110}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useRef, useState, useCallback, useEffect } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { Camera, RefreshCw, Upload, Check, AlertCircle, Loader2, Info, ArrowLeft, ShieldCheck, Zap } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { Product } from \"@/lib/types\";\r\nimport { useAuth } from \"@/components/providers/AuthProvider\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst videoConstraints = {\r\n    width: 1280,\r\n    height: 720,\r\n    facingMode: \"environment\",\r\n};\r\n\r\nexport default function ScanPage() {\r\n    const { profile, loading: authLoading } = useAuth();\r\n    const router = useRouter();\r\n    const webcamRef = useRef<Webcam>(null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const [imgSrc, setImgSrc] = useState<string | null>(null);\r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [scanResult, setScanResult] = useState<Partial<Product> | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (!authLoading && !profile) {\r\n            router.push(\"/\");\r\n        }\r\n    }, [authLoading, profile, router]);\r\n\r\n    const capture = useCallback(() => {\r\n        const imageSrc = webcamRef.current?.getScreenshot();\r\n        if (imageSrc) {\r\n            setImgSrc(imageSrc);\r\n            processImage(imageSrc);\r\n        }\r\n    }, [webcamRef]);\r\n\r\n    const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = event.target.files?.[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                const base64String = reader.result as string;\r\n                setImgSrc(base64String);\r\n                processImage(base64String);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const processImage = async (image: string) => {\r\n        setIsProcessing(true);\r\n        // Simulation of OCR processing using the standardized Electrolux label\r\n        setTimeout(() => {\r\n            setScanResult({\r\n                brand: \"Electrolux\",\r\n                model: \"IM8S\",\r\n                commercial_code: \"02623FBA\",\r\n                color: \"30\",\r\n                product_type: \"COMB. FROST FREE ELUX\",\r\n                pnc_ml: \"900277738 / 00\",\r\n                serial: \"30926473\",\r\n                manufacturing_date: \"03/03/2023 - 09:50:18\",\r\n                market_class: \"T / I\",\r\n                refrigerant_gas: \"R600a\",\r\n                gas_charge: \"45 g\",\r\n                compressor: \"EMBRACO\",\r\n                volume_freezer: \"200 L\",\r\n                volume_refrigerator: \"390 L\",\r\n                volume_total: \"590 L\",\r\n                pressure_high_low: \"(788 / 52) kPa / (100 / 7,09) psig\",\r\n                freezing_capacity: \"9 kg / 24h\",\r\n                electric_current: \"2,3 A\",\r\n                defrost_power: \"316 W\",\r\n                frequency: \"60 Hz\",\r\n                voltage: \"127 V\",\r\n            });\r\n            setIsProcessing(false);\r\n            toast.info(\"Leitura concluída com sucesso!\");\r\n        }, 2000);\r\n    };\r\n\r\n    const handleConfirmSave = async () => {\r\n        if (!scanResult) return;\r\n        setIsSaving(true);\r\n        const internalSerial = `INT-${Date.now().toString().slice(-8)}`;\r\n\r\n        try {\r\n            if (!profile) throw new Error(\"Usuário não identificado.\");\r\n\r\n            const { data: existing } = await supabase\r\n                .from(\"products\")\r\n                .select(\"id, status, internal_serial\")\r\n                .eq(\"original_serial\", scanResult?.serial)\r\n                .neq(\"status\", \"LIBERADO\")\r\n                .maybeSingle();\r\n\r\n            if (existing) {\r\n                toast.warning(\"Equipamento já registrado\", {\r\n                    description: `O serial ${scanResult.serial} já possui o registro interno ${existing.internal_serial} em andamento.`,\r\n                });\r\n                setIsSaving(false);\r\n                return;\r\n            }\r\n\r\n            const { error } = await supabase.from(\"products\").insert([\r\n                {\r\n                    ...scanResult,\r\n                    original_serial: scanResult.serial,\r\n                    internal_serial: internalSerial,\r\n                    status: \"CADASTRO\",\r\n                    is_in_stock: true,\r\n                    created_by: profile.id\r\n                },\r\n            ]);\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(\"Cadastro Realizado!\", {\r\n                description: `Produto ${scanResult.model} registrado sob ID ${internalSerial}.`,\r\n            });\r\n            resetScan();\r\n        } catch (error: any) {\r\n            toast.error(\"Falha no cadastro\", { description: error.message });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const resetScan = () => {\r\n        setImgSrc(null);\r\n        setScanResult(null);\r\n    };\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <MainLayout>\r\n                <div className=\"flex h-[60vh] flex-col items-center justify-center\">\r\n                    <Loader2 className=\"h-10 w-10 animate-spin text-primary opacity-50\" />\r\n                </div>\r\n            </MainLayout>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <MainLayout>\r\n            <input type=\"file\" accept=\"image/*\" ref={fileInputRef} onChange={handleFileUpload} className=\"hidden\" />\r\n\r\n            <div className=\"max-w-6xl mx-auto space-y-8 pb-12\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <h1 className=\"text-4xl font-black tracking-tighter text-white mb-2 uppercase\">Scan Vision <span className=\"text-primary italic\">AI</span></h1>\r\n                        <p className=\"text-muted-foreground font-medium italic opacity-70\">Capture e decodifique parâmetros industriais instantaneamente.</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid gap-8 lg:grid-cols-5 items-start\">\r\n                    {/* Viewport de Captura */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        <div className=\"relative aspect-square md:aspect-video lg:aspect-square overflow-hidden rounded-[2.5rem] bg-neutral-900 border-4 border-white/5 shadow-[0_0_50px_rgba(0,0,0,0.5)] group\">\r\n                            {!imgSrc ? (\r\n                                <>\r\n                                    <Webcam audio={false} ref={webcamRef} screenshotFormat=\"image/jpeg\" videoConstraints={videoConstraints} className=\"h-full w-full object-cover\" />\r\n                                    <div className=\"absolute inset-0 border-[40px] border-black/40 pointer-events-none\" />\r\n                                    <div className=\"absolute inset-[40px] border-2 border-primary/30 border-dashed rounded-xl pointer-events-none\" />\r\n                                    <div className=\"absolute bottom-10 left-0 right-0 flex justify-center gap-6\">\r\n                                        <button onClick={capture} className=\"h-20 w-20 rounded-full bg-primary text-white shadow-[0_0_30px_rgba(var(--primary),0.5)] flex items-center justify-center hover:scale-110 active:scale-95 transition-all\">\r\n                                            <Camera className=\"h-10 w-10\" />\r\n                                        </button>\r\n                                        <button onClick={() => fileInputRef.current?.click()} className=\"h-20 w-20 rounded-full bg-white/5 backdrop-blur-xl text-white border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all\">\r\n                                            <Upload className=\"h-8 w-8\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <div className=\"relative h-full w-full\">\r\n                                    <img src={imgSrc} alt=\"Preview\" className=\"h-full w-full object-cover\" />\r\n                                    {isProcessing && (\r\n                                        <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md animate-in fade-in\">\r\n                                            <div className=\"relative h-20 w-20\">\r\n                                                <Loader2 className=\"h-20 w-20 text-primary animate-spin opacity-20\" />\r\n                                                <Zap className=\"absolute inset-0 m-auto h-8 w-8 text-primary animate-pulse\" />\r\n                                            </div>\r\n                                            <p className=\"mt-6 text-sm font-black text-primary tracking-[0.3em] uppercase animate-pulse\">Neural Processing...</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {imgSrc && !isProcessing && (\r\n                            <div className=\"grid grid-cols-5 gap-3\">\r\n                                <button\r\n                                    onClick={handleConfirmSave}\r\n                                    disabled={isSaving || !scanResult}\r\n                                    className=\"col-span-4 h-16 bg-white text-black hover:bg-primary hover:text-white rounded-3xl font-black uppercase tracking-widest text-xs transition-all flex items-center justify-center gap-3 disabled:grayscale\"\r\n                                >\r\n                                    {isSaving ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <ShieldCheck className=\"h-5 w-5\" />}\r\n                                    Finalizar Registro\r\n                                </button>\r\n                                <button\r\n                                    onClick={resetScan}\r\n                                    className=\"col-span-1 h-16 rounded-3xl bg-red-500/10 text-red-500 border border-red-500/20 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all\"\r\n                                >\r\n                                    <RefreshCw className=\"h-6 w-6\" />\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Dashboard de Dados */}\r\n                    <div className=\"lg:col-span-3\">\r\n                        {scanResult ? (\r\n                            <div className=\"glass-card h-full p-10 border-white/10 shadow-3xl flex flex-col group animate-in slide-in-from-bottom-8 duration-700\">\r\n                                <div className=\"flex items-center justify-between mb-8 pb-6 border-b border-white/5\">\r\n                                    <div className=\"flex gap-4 items-center\">\r\n                                        <div className=\"h-14 w-14 rounded-2xl bg-emerald-500/10 flex items-center justify-center text-emerald-500\">\r\n                                            <Check className=\"h-8 w-8\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <h2 className=\"text-2xl font-black text-white leading-tight uppercase tracking-tighter\">Dados Extraídos</h2>\r\n                                            <p className=\"text-[10px] text-muted-foreground font-bold tracking-widest uppercase\">Validação de Telemetria Industrial</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <div className=\"text-[9px] font-black text-muted-foreground uppercase opacity-40 mb-1\">Status Confiança</div>\r\n                                        <div className=\"text-xs font-black text-emerald-500 bg-emerald-500/5 px-4 py-1.5 rounded-full border border-emerald-500/20 uppercase tracking-widest\">99.8% Match</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 lg:grid-cols-3 gap-x-10 gap-y-6\">\r\n                                    {[\r\n                                        { label: \"Fabricante\", value: scanResult.brand, accent: true },\r\n                                        { label: \"Modelo\", value: scanResult.model, accent: true },\r\n                                        { label: \"Serial Original\", value: scanResult.serial, mono: true },\r\n                                        { label: \"PNC / ML\", value: scanResult.pnc_ml },\r\n                                        { label: \"Cód. Comercial\", value: scanResult.commercial_code },\r\n                                        { label: \"Tipo\", value: scanResult.product_type },\r\n                                        { label: \"Gás Refrig.\", value: scanResult.refrigerant_gas },\r\n                                        { label: \"Carga Gás\", value: scanResult.gas_charge },\r\n                                        { label: \"Fabricação\", value: scanResult.manufacturing_date },\r\n                                        { label: \"Classe\", value: scanResult.market_class },\r\n                                        { label: \"Volume Freezer\", value: scanResult.volume_freezer },\r\n                                        { label: \"Volume Refrig.\", value: scanResult.volume_refrigerator },\r\n                                        { label: \"Total Líquido\", value: scanResult.volume_total },\r\n                                        { label: \"Pressão A/B\", value: scanResult.pressure_high_low },\r\n                                        { label: \"Cap. Congel.\", value: scanResult.freezing_capacity },\r\n                                        { label: \"Corrente\", value: scanResult.electric_current },\r\n                                        { label: \"Degelo\", value: scanResult.defrost_power },\r\n                                        { label: \"Tensão / Freq.\", value: `${scanResult.voltage} / ${scanResult.frequency}` },\r\n                                    ].map((field, i) => (\r\n                                        <div key={i} className=\"flex flex-col group/item\">\r\n                                            <span className=\"text-[9px] font-black text-muted-foreground uppercase tracking-widest mb-1 group-hover/item:text-primary transition-colors\">\r\n                                                {field.label}\r\n                                            </span>\r\n                                            <span className={cn(\r\n                                                \"text-sm font-medium transition-all truncate\",\r\n                                                field.accent ? \"text-primary font-black text-lg\" : \"text-white/80\",\r\n                                                field.mono && \"font-mono tracking-tighter\"\r\n                                            )}>\r\n                                                {field.value || \"---\"}\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n\r\n                                <div className=\"mt-auto pt-10\">\r\n                                    <div className=\"flex items-start gap-4 p-5 rounded-3xl bg-white/5 border border-white/5 shadow-inner\">\r\n                                        <Info className=\"h-6 w-6 text-primary shrink-0 mt-0.5\" />\r\n                                        <p className=\"text-[11px] text-muted-foreground leading-relaxed italic\">\r\n                                            A tecnologia <strong>Scan Vision</strong> realiza o mapeamento de 21 coordenadas da etiqueta técnica.\r\n                                            Verificações manuais de integridade são recomendadas antes do faturamento.\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"glass-card h-full min-h-[500px] flex flex-col items-center justify-center text-center p-16 border-dashed border-2 bg-white/1 relative overflow-hidden\">\r\n                                <div className=\"absolute inset-0 opacity-5 pointer-events-none\">\r\n                                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent animate-infinite-scan\" />\r\n                                </div>\r\n                                <div className=\"h-32 w-32 rounded-full bg-white/5 flex items-center justify-center mb-10 relative\">\r\n                                    <Camera className=\"h-16 w-16 text-muted-foreground opacity-10\" />\r\n                                    <div className=\"absolute inset-0 rounded-full border-2 border-primary/20 border-t-primary animate-spin\" style={{ animationDuration: '4s' }} />\r\n                                </div>\r\n                                <h3 className=\"text-3xl font-black text-white mb-4 uppercase tracking-tighter\">Otimize sua Fila</h3>\r\n                                <p className=\"text-muted-foreground max-w-sm mx-auto leading-relaxed italic text-sm\">\r\n                                    Posicione a etiqueta técnica no centro do visor. <br />\r\n                                    <strong>Resolução mínima recomendada: 1080p.</strong>\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\technician\\checklist\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":10,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[272,291],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":11,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"XCircle"},"fix":{"range":[291,305],"text":""},"desc":"Remove unused variable \"XCircle\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProduct'. Either include it or remove the dependency array.","line":38,"column":8,"nodeType":"ArrayExpression","endLine":38,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProduct, id]","fix":{"range":[1389,1393],"text":"[fetchProduct, id]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3608,3611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3608,3611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport {\r\n    Loader2,\r\n    ChevronLeft,\r\n    CheckCircle2,\r\n    XCircle,\r\n    Save,\r\n    AlertTriangle,\r\n    CheckCircle\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst checklistItems = [\r\n    { id: \"power\", label: \"Liga Corretamente?\", category: \"Funcional\" },\r\n    { id: \"display\", label: \"Display/Painel funcionando?\", category: \"Funcional\" },\r\n    { id: \"physical_status\", label: \"Integridade Física (Sem amassados/riscos)\", category: \"Estético\" },\r\n    { id: \"cleanliness\", label: \"Estado de Limpeza\", category: \"Geral\" },\r\n    { id: \"cables\", label: \"Cabos e Conectores íntegros?\", category: \"Componentes\" },\r\n];\r\n\r\nexport default function TechnicianChecklist() {\r\n    const { id } = useParams();\r\n    const router = useRouter();\r\n    const [product, setProduct] = useState<any>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n    const [checklistData, setChecklistData] = useState<Record<string, boolean>>({});\r\n    const [obs, setObs] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (id) fetchProduct();\r\n    }, [id]);\r\n\r\n    const fetchProduct = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(\"*\")\r\n                .eq(\"id\", id)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            setProduct(data);\r\n\r\n            // Initialize checklist\r\n            const initial: Record<string, boolean> = {};\r\n            checklistItems.forEach(item => initial[item.id] = false);\r\n            setChecklistData(initial);\r\n        } catch (error) {\r\n            console.error(\"Erro:\", error);\r\n            toast.error(\"Produto não encontrado\");\r\n            router.push(\"/technician\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const toggleItem = (itemId: string) => {\r\n        setChecklistData(prev => ({ ...prev, [itemId]: !prev[itemId] }));\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        setIsSubmitting(true);\r\n        try {\r\n            // 1. Update product status\r\n            const { error: updateError } = await supabase\r\n                .from(\"products\")\r\n                .update({\r\n                    status: \"TECNICO\",\r\n                    stock_status: \"DISPONIVEL\"\r\n                })\r\n                .eq(\"id\", id);\r\n\r\n            if (updateError) throw updateError;\r\n\r\n            // 2. Add log entry\r\n            const { error: logError } = await supabase\r\n                .from(\"product_logs\")\r\n                .insert({\r\n                    product_id: id,\r\n                    old_status: \"CADASTRO\",\r\n                    new_status: \"TECNICO\",\r\n                    user_id: (await supabase.auth.getUser()).data.user?.id || null, // Optional for now\r\n                    data: {\r\n                        checklist: checklistData,\r\n                        observations: obs,\r\n                        technician_timestamp: new Date().toISOString()\r\n                    }\r\n                });\r\n\r\n            if (logError) throw logError;\r\n\r\n            toast.success(\"Checklist finalizado!\", {\r\n                description: \"Produto enviado para aprovação do Supervisor.\"\r\n            });\r\n            router.push(\"/technician\");\r\n        } catch (error: any) {\r\n            console.error(\"Erro ao salvar:\", error);\r\n            toast.error(\"Erro ao finalizar checklist\", {\r\n                description: error.message\r\n            });\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <MainLayout>\r\n                <div className=\"flex h-[60vh] items-center justify-center\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                </div>\r\n            </MainLayout>\r\n        );\r\n    }\r\n\r\n    const allChecked = Object.values(checklistData).every(v => v === true);\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"max-w-3xl mx-auto space-y-8 pb-20\">\r\n                <button\r\n                    onClick={() => router.back()}\r\n                    className=\"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors\"\r\n                >\r\n                    <ChevronLeft className=\"h-4 w-4\" /> Voltar\r\n                </button>\r\n\r\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold tracking-tight\">Checklist Técnico</h1>\r\n                        <p className=\"text-muted-foreground\">Avalie o estado do produto {product?.internal_serial}.</p>\r\n                    </div>\r\n                    <div className=\"glass-card py-2 px-4 border-primary/20 bg-primary/5\">\r\n                        <div className=\"text-[10px] uppercase font-bold tracking-widest text-primary\">Modelo</div>\r\n                        <div className=\"font-semibold\">{product?.model}</div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {/* Dynamic Checklist */}\r\n                    <div className=\"grid gap-3\">\r\n                        {checklistItems.map((item) => (\r\n                            <button\r\n                                key={item.id}\r\n                                onClick={() => toggleItem(item.id)}\r\n                                className={cn(\r\n                                    \"flex items-center justify-between p-4 rounded-xl border transition-all duration-200 text-left\",\r\n                                    checklistData[item.id]\r\n                                        ? \"bg-primary/10 border-primary/40 shadow-sm\"\r\n                                        : \"bg-white/5 border-white/5 hover:border-white/10\"\r\n                                )}\r\n                            >\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    <div className={cn(\r\n                                        \"h-6 w-6 rounded-full border-2 flex items-center justify-center transition-colors\",\r\n                                        checklistData[item.id] ? \"bg-primary border-primary\" : \"border-white/20\"\r\n                                    )}>\r\n                                        {checklistData[item.id] && <CheckCircle className=\"h-4 w-4 text-white\" />}\r\n                                    </div>\r\n                                    <div>\r\n                                        <div className=\"font-medium\">{item.label}</div>\r\n                                        <div className=\"text-[10px] uppercase text-muted-foreground opacity-60 tracking-wider \">{item.category}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Observations */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-medium text-muted-foreground\">Observações Técnicas</label>\r\n                        <textarea\r\n                            value={obs}\r\n                            onChange={(e) => setObs(e.target.value)}\r\n                            placeholder=\"Descreva detalhes adicionais ou avarias se necessário...\"\r\n                            className=\"w-full h-32 rounded-xl border border-border bg-white/5 p-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary transition-all\"\r\n                        />\r\n                    </div>\r\n\r\n                    {!allChecked && (\r\n                        <div className=\"flex items-center gap-2 p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/20 text-yellow-500 text-sm\">\r\n                            <AlertTriangle className=\"h-4 w-4\" />\r\n                            Atenção: Alguns itens não foram validados.\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex gap-4\">\r\n                        <button\r\n                            onClick={handleSubmit}\r\n                            disabled={isSubmitting}\r\n                            className=\"btn-primary flex-1 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isSubmitting ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : <Save className=\"h-4 w-4\" />}\r\n                            Finalizar Avaliação\r\n                        </button>\r\n                        <button\r\n                            onClick={() => router.back()}\r\n                            className=\"px-6 rounded-xl border border-border hover:bg-white/5 transition-all text-sm font-medium\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\app\\technician\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ClipboardCheck' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":24,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ClipboardCheck"},"fix":{"range":[185,200],"text":""},"desc":"Remove unused variable \"ClipboardCheck\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"cn"},"fix":{"range":[304,339],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[435,438],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[435,438],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { MainLayout } from \"@/components/layout/MainLayout\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { ClipboardCheck, Search, Loader2, AlertCircle, ChevronRight, Box } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport default function TechnicianDashboard() {\r\n    const [products, setProducts] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        fetchPendingProducts();\r\n    }, []);\r\n\r\n    const fetchPendingProducts = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from(\"products\")\r\n                .select(\"*\")\r\n                .eq(\"status\", \"CADASTRO\")\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setProducts(data || []);\r\n        } catch (error) {\r\n            console.error(\"Erro ao buscar produtos:\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const filteredProducts = products.filter(p =>\r\n        p.internal_serial.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        p.model.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <MainLayout>\r\n            <div className=\"space-y-6\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Painel do Técnico</h1>\r\n                    <p className=\"text-muted-foreground\">Produtos aguardando avaliação e checklist.</p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 py-2\">\r\n                    <div className=\"relative flex-1\">\r\n                        <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar por ID Interno ou Modelo...\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                            className=\"w-full rounded-lg border border-border bg-white/5 py-2 pl-10 pr-4 text-sm focus:outline-none focus:ring-1 focus:ring-primary\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {isLoading ? (\r\n                    <div className=\"flex h-64 flex-col items-center justify-center space-y-4\">\r\n                        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                        <p className=\"text-sm text-muted-foreground\">Carregando fila de trabalho...</p>\r\n                    </div>\r\n                ) : filteredProducts.length > 0 ? (\r\n                    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                        {filteredProducts.map((product) => (\r\n                            <Link\r\n                                key={product.id}\r\n                                href={`/technician/checklist/${product.id}`}\r\n                                className=\"group glass-card hover:border-primary/50 transition-all duration-300\"\r\n                            >\r\n                                <div className=\"flex items-start justify-between mb-4\">\r\n                                    <div className=\"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary\">\r\n                                        <Box className=\"h-5 w-5\" />\r\n                                    </div>\r\n                                    <span className=\"text-[10px] font-bold bg-white/5 px-2 py-1 rounded text-muted-foreground uppercase tracking-widest\">\r\n                                        {product.internal_serial}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <h3 className=\"font-semibold text-lg group-hover:text-primary transition-colors\">{product.model}</h3>\r\n                                    <p className=\"text-sm text-muted-foreground\">{product.brand}</p>\r\n                                </div>\r\n                                <div className=\"mt-4 pt-4 border-t border-white/5 flex items-center justify-between text-xs\">\r\n                                    <span className=\"text-muted-foreground italic\">Cadastrado em {new Date(product.created_at).toLocaleDateString()}</span>\r\n                                    <div className=\"flex items-center text-primary font-bold gap-1\">\r\n                                        Checklist <ChevronRight className=\"h-3 w-3\" />\r\n                                    </div>\r\n                                </div>\r\n                            </Link>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"glass-card flex flex-col items-center justify-center py-16 text-center border-dashed\">\r\n                        <AlertCircle className=\"h-12 w-12 text-muted-foreground/30 mb-4\" />\r\n                        <h3 className=\"text-xl font-semibold\">Tudo em dia!</h3>\r\n                        <p className=\"text-muted-foreground max-w-xs mt-2 text-sm\">\r\n                            Não há produtos pendentes de avaliação técnica no momento.\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </MainLayout>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\components\\layout\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\components\\providers\\AuthProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserRole' is defined but never used.","line":5,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"UserRole"},"fix":{"range":[157,167],"text":""},"desc":"Remove unused variable \"UserRole\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { Profile, UserRole } from \"@/lib/types\";\r\nimport { User } from \"@supabase/supabase-js\";\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    profile: Profile | null;\r\n    loading: boolean;\r\n    signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    user: null,\r\n    profile: null,\r\n    loading: true,\r\n    signOut: async () => { },\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [profile, setProfile] = useState<Profile | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchProfile = async (userId: string) => {\r\n        const { data, error } = await supabase\r\n            .from(\"profiles\")\r\n            .select(\"*\")\r\n            .eq(\"id\", userId)\r\n            .single();\r\n\r\n        if (!error && data) {\r\n            setProfile(data as Profile);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // 1. Get initial session\r\n        const initAuth = async () => {\r\n            const { data: { session } } = await supabase.auth.getSession();\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                await fetchProfile(session.user.id);\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        initAuth();\r\n\r\n        // 2. Listen for auth changes\r\n        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                await fetchProfile(session.user.id);\r\n            } else {\r\n                setProfile(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => subscription.unsubscribe();\r\n    }, []);\r\n\r\n    const signOut = async () => {\r\n        await supabase.auth.signOut();\r\n        window.location.href = \"/login\";\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, profile, loading, signOut }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\lib\\export-utils.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[195,198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[195,198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[284,287],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[284,287],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1030,1033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1030,1033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport * as XLSX from 'xlsx';\r\n\r\n// Extend jsPDF with autotable for TS\r\ninterface jsPDFWithPlugin extends jsPDF {\r\n    autoTable: (options: any) => jsPDF;\r\n}\r\n\r\nexport const exportToPDF = (title: string, headers: string[], data: any[][], fileName: string) => {\r\n    const doc = new jsPDF() as jsPDFWithPlugin;\r\n\r\n    // Add Title\r\n    doc.setFontSize(18);\r\n    doc.text(title, 14, 22);\r\n    doc.setFontSize(11);\r\n    doc.setTextColor(100);\r\n\r\n    // Add Date\r\n    const date = new Date().toLocaleString('pt-BR');\r\n    doc.text(`Gerado em: ${date}`, 14, 30);\r\n\r\n    doc.autoTable({\r\n        head: [headers],\r\n        body: data,\r\n        startY: 35,\r\n        theme: 'grid',\r\n        headStyles: { fillColor: [14, 165, 233], textColor: [255, 255, 255] }, // primary sky-500\r\n        alternateRowStyles: { fillColor: [245, 245, 245] },\r\n        margin: { top: 35 },\r\n    });\r\n\r\n    doc.save(`${fileName}_${new Date().getTime()}.pdf`);\r\n};\r\n\r\nexport const exportToExcel = (data: any[], fileName: string) => {\r\n    const worksheet = XLSX.utils.json_to_sheet(data);\r\n    const workbook = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(workbook, worksheet, \"Dados\");\r\n\r\n    // Standard fixed formatting could be added here\r\n\r\n    XLSX.writeFile(workbook, `${fileName}_${new Date().getTime()}.xlsx`);\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\lib\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\lib\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1222,1225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1222,1225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1546,1549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1546,1549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1656,1659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1656,1659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type UserRole = 'TECNICO' | 'SUPERVISOR' | 'GESTOR' | 'ADMIN';\r\n\r\nexport interface Profile {\r\n    id: string;\r\n    full_name: string | null;\r\n    role: UserRole;\r\n    created_at?: string;\r\n    updated_at?: string;\r\n}\r\n\r\nexport interface Product {\r\n    id: string;\r\n    original_serial: string | null;\r\n    serial?: string | null; // Alias for original_serial in UI\r\n    internal_serial: string | null;\r\n    brand: string | null;\r\n    model: string | null;\r\n    commercial_code: string | null;\r\n    color: string | null;\r\n    product_type: string | null;\r\n    pnc_ml: string | null;\r\n    manufacturing_date: string | null;\r\n    market_class: string | null;\r\n    refrigerant_gas: string | null;\r\n    gas_charge: string | null;\r\n    compressor: string | null;\r\n    volume_freezer: string | null;\r\n    volume_refrigerator: string | null;\r\n    volume_total: string | null;\r\n    pressure_high_low: string | null;\r\n    freezing_capacity: string | null;\r\n    electric_current: string | null;\r\n    defrost_power: string | null;\r\n    frequency: string | null;\r\n    voltage: string | null;\r\n    status: string;\r\n    stock_status?: string | null;\r\n    order_id?: string | null;\r\n    is_in_stock: boolean;\r\n    technical_data?: any;\r\n    created_at: string;\r\n    updated_at: string;\r\n    created_by: string | null;\r\n}\r\n\r\nexport interface ProductLog {\r\n    id: string;\r\n    product_id: string;\r\n    user_id: string | null; // Renamed from actor_id\r\n    old_status: string | null; // Renamed from previous_status\r\n    new_status: string;\r\n    checklist: any | null;\r\n    notes: string | null;\r\n    created_at: string;\r\n    products?: Partial<Product>;\r\n    data?: any;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Sites\\Scan-relatorio\\src\\proxy.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":20,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient } from '@supabase/ssr'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport async function proxy(request: NextRequest) {\r\n    let response = NextResponse.next({\r\n        request: {\r\n            headers: request.headers,\r\n        },\r\n    })\r\n\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return request.cookies.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))\r\n                    response = NextResponse.next({\r\n                        request: {\r\n                            headers: request.headers,\r\n                        },\r\n                    })\r\n                    cookiesToSet.forEach(({ name, value, options }) =>\r\n                        response.cookies.set(name, value, options)\r\n                    )\r\n                },\r\n            },\r\n        }\r\n    )\r\n\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    const isLoginPage = request.nextUrl.pathname === '/login'\r\n    const isPublicAsset = request.nextUrl.pathname.startsWith('/_next') ||\r\n        request.nextUrl.pathname.includes('.') ||\r\n        request.nextUrl.pathname.startsWith('/api')\r\n\r\n    // 1. If no user and trying to access protected route -> go to login\r\n    if (!user && !isLoginPage && !isPublicAsset) {\r\n        const url = request.nextUrl.clone()\r\n        url.pathname = '/login'\r\n        return NextResponse.redirect(url)\r\n    }\r\n\r\n    // 2. If user exists and trying to access login -> go to home\r\n    if (user && isLoginPage) {\r\n        const url = request.nextUrl.clone()\r\n        url.pathname = '/'\r\n        return NextResponse.redirect(url)\r\n    }\r\n\r\n    return response\r\n}\r\n\r\nexport const config = {\r\n    matcher: [\r\n        /*\r\n         * Match all request paths except for the ones starting with:\r\n         * - _next/static (static files)\r\n         * - _next/image (image optimization files)\r\n         * - favicon.ico (favicon file)\r\n         * Feel free to modify this pattern to include more paths.\r\n         */\r\n        '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\r\n    ],\r\n}\r\n","usedDeprecatedRules":[]}]